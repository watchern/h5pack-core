import{v as D,F as P,a as S,_ as k}from"./inline-px-to-vw-DLjgF5ei.js";import{d as E,G as U,T as B,a1 as M,r as y,a2 as h,f as N,a3 as w,_ as q,M as T,N as F,k as t,O as i,U as m,$ as g,a0 as _,a4 as G}from"./index-CVtWMJkx.js";import"./index-Dv3ZyyeD.js";import{b}from"./route-block-B_A1xBdJ.js";import{B as z}from"./index-uE27sqwn.js";import"./use-id-BMaC43my.js";import"./toNumber-BA28v8oo.js";import"./index-0tjujYex.js";const V=E({__name:"index",setup(d,{expose:r}){r();const{t:o}=U(),e=B(),u=M(),p=y(!1),a=h({email:"",code:"",password:"",confirmPassword:""}),l=n=>n===a.password,c=h({email:[{required:!0,message:o("forgot-password.pleaseEnterEmail")}],code:[{required:!0,message:o("forgot-password.pleaseEnterCode")}],password:[{required:!0,message:o("forgot-password.pleaseEnterPassword")}],confirmPassword:[{required:!0,message:o("forgot-password.pleaseEnterConfirmPassword")},{required:!0,validator:l,message:o("forgot-password.passwordsDoNotMatch")}]});async function f(){try{p.value=!0,(await u.reset()).code===0&&(w({type:"success",message:o("forgot-password.passwordResetSuccess")}),e.push({name:"login"}))}finally{p.value=!1}}const s=y(!1),x=N(()=>s.value?o("forgot-password.gettingCode"):o("forgot-password.getCode"));async function C(){if(!a.email){w({type:"warning",message:o("forgot-password.pleaseEnterEmail")});return}s.value=!0;const n=await u.getCode();n.code===0&&w({type:"success",message:"".concat(o("forgot-password.sendCodeSuccess"),": ").concat(n.result)}),s.value=!1}const v={t:o,router:e,userStore:u,loading:p,postData:a,validatorPassword:l,rules:c,reset:f,isGettingCode:s,buttonText:x,getCode:C,get vw(){return D}};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),O={class:"m-x-a text-center w-7xl"},R={class:"rounded-3xl overflow-hidden"},j={class:"mt-16 rounded-3xl overflow-hidden"},A={class:"mt-16 rounded-3xl overflow-hidden"},I={class:"mt-16 rounded-3xl overflow-hidden"},L={class:"mt-16"};function H(d,r,o,e,u,p){const a=P,l=z,c=S,f=k;return F(),T("div",O,[t(c,{model:e.postData,rules:e.rules,"validate-trigger":"onSubmit",onSubmit:e.reset},{default:i(()=>[m("div",R,[t(a,{modelValue:e.postData.email,"onUpdate:modelValue":r[0]||(r[0]=s=>e.postData.email=s),modelModifiers:{trim:!0},rules:e.rules.email,name:"email",placeholder:d.$t("forgot-password.email")},null,8,["modelValue","rules","placeholder"])]),m("div",j,[t(a,{modelValue:e.postData.code,"onUpdate:modelValue":r[1]||(r[1]=s=>e.postData.code=s),modelModifiers:{trim:!0},rules:e.rules.code,name:"code",placeholder:d.$t("forgot-password.code")},{button:i(()=>[t(l,{size:"small",type:"primary",plain:"",onClick:e.getCode},{default:i(()=>[g(_(e.buttonText),1)]),_:1})]),_:1},8,["modelValue","rules","placeholder"])]),m("div",A,[t(a,{modelValue:e.postData.password,"onUpdate:modelValue":r[2]||(r[2]=s=>e.postData.password=s),modelModifiers:{trim:!0},type:"password",rules:e.rules.password,name:"password",placeholder:d.$t("forgot-password.password")},null,8,["modelValue","rules","placeholder"])]),m("div",I,[t(a,{modelValue:e.postData.confirmPassword,"onUpdate:modelValue":r[3]||(r[3]=s=>e.postData.confirmPassword=s),modelModifiers:{trim:!0},type:"password",rules:e.rules.confirmPassword,name:"confirmPassword",placeholder:d.$t("forgot-password.comfirmPassword")},null,8,["modelValue","rules","placeholder"])]),m("div",L,[t(l,{loading:e.loading,type:"primary","native-type":"submit",round:"",block:""},{default:i(()=>[g(_(d.$t("forgot-password.confirm")),1)]),_:1},8,["loading"])])]),_:1},8,["model","rules"]),t(f,{to:"login",block:"",style:G({"margin-top":e.vw(8)})},{default:i(()=>[g(_(d.$t("forgot-password.backToLogin")),1)]),_:1},8,["style"])])}typeof b=="function"&&b(V);const ee=q(V,[["render",H],["__file","C:/Users/Administrator/Desktop/vue-crx/vue3-vant-mobile/src/pages/forgot-password/index.vue"]]);export{ee as default};
