import{F as $,a as x,v as B,_ as M}from"./inline-px-to-vw-Cb-HqVio.js";import{d as N,G as q,V as U,a2 as D,r as v,a3 as y,f as F,M as G,N as T,k as t,O as n,W as i,Q as e,a0 as c,a1 as f,a4 as z,a5 as w}from"./index-CWnvaZUX.js";import"./index-DCkYsqDO.js";import{B as R}from"./index-ClkBfOaF.js";import{b as h}from"./route-block-B_A1xBdJ.js";import"./use-id-DFe4c6kO.js";import"./toNumber-BA28v8oo.js";import"./index-Bm0YupIy.js";const I={class:"m-x-a text-center w-7xl"},L={class:"rounded-3xl overflow-hidden"},O={class:"mt-16 rounded-3xl overflow-hidden"},Q={class:"mt-16 rounded-3xl overflow-hidden"},W={class:"mt-16 rounded-3xl overflow-hidden"},j={class:"mt-16"},A=N({__name:"index",setup(H){const{t:r}=q(),V=U(),g=D(),u=v(!1),s=y({email:"",code:"",password:"",confirmPassword:""}),b=o=>o===s.password,l=y({email:[{required:!0,message:r("forgot-password.pleaseEnterEmail")}],code:[{required:!0,message:r("forgot-password.pleaseEnterCode")}],password:[{required:!0,message:r("forgot-password.pleaseEnterPassword")}],confirmPassword:[{required:!0,message:r("forgot-password.pleaseEnterConfirmPassword")},{required:!0,validator:b,message:r("forgot-password.passwordsDoNotMatch")}]});async function C(){try{u.value=!0,(await g.reset()).code===0&&(w({type:"success",message:r("forgot-password.passwordResetSuccess")}),V.push({name:"login"}))}finally{u.value=!1}}const p=v(!1),P=F(()=>p.value?r("forgot-password.gettingCode"):r("forgot-password.getCode"));async function k(){if(!s.email){w({type:"warning",message:r("forgot-password.pleaseEnterEmail")});return}p.value=!0;const o=await g.getCode();o.code===0&&w({type:"success",message:"".concat(r("forgot-password.sendCodeSuccess"),": ").concat(o.result)}),p.value=!1}return(o,a)=>{const m=$,_=R,E=x,S=M;return T(),G("div",I,[t(E,{model:e(s),rules:e(l),"validate-trigger":"onSubmit",onSubmit:C},{default:n(()=>[i("div",L,[t(m,{modelValue:e(s).email,"onUpdate:modelValue":a[0]||(a[0]=d=>e(s).email=d),modelModifiers:{trim:!0},rules:e(l).email,name:"email",placeholder:o.$t("forgot-password.email")},null,8,["modelValue","rules","placeholder"])]),i("div",O,[t(m,{modelValue:e(s).code,"onUpdate:modelValue":a[1]||(a[1]=d=>e(s).code=d),modelModifiers:{trim:!0},rules:e(l).code,name:"code",placeholder:o.$t("forgot-password.code")},{button:n(()=>[t(_,{size:"small",type:"primary",plain:"",onClick:k},{default:n(()=>[c(f(e(P)),1)]),_:1})]),_:1},8,["modelValue","rules","placeholder"])]),i("div",Q,[t(m,{modelValue:e(s).password,"onUpdate:modelValue":a[2]||(a[2]=d=>e(s).password=d),modelModifiers:{trim:!0},type:"password",rules:e(l).password,name:"password",placeholder:o.$t("forgot-password.password")},null,8,["modelValue","rules","placeholder"])]),i("div",W,[t(m,{modelValue:e(s).confirmPassword,"onUpdate:modelValue":a[3]||(a[3]=d=>e(s).confirmPassword=d),modelModifiers:{trim:!0},type:"password",rules:e(l).confirmPassword,name:"confirmPassword",placeholder:o.$t("forgot-password.comfirmPassword")},null,8,["modelValue","rules","placeholder"])]),i("div",j,[t(_,{loading:e(u),type:"primary","native-type":"submit",round:"",block:""},{default:n(()=>[c(f(o.$t("forgot-password.confirm")),1)]),_:1},8,["loading"])])]),_:1},8,["model","rules"]),t(S,{to:"login",block:"",style:z({"margin-top":e(B)(8)})},{default:n(()=>[c(f(o.$t("forgot-password.backToLogin")),1)]),_:1},8,["style"])])}}});typeof h=="function"&&h(A);export{A as default};
