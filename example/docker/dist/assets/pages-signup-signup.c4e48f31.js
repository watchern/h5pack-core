import{_ as e}from"./Black.5562f5e4.js";import{u as t,a,_ as l}from"./input.ea4d2faf.js";import{d as s,E as o,G as i,D as n,c,A as u,o as r,a as d,w as p,n as m,u as x,r as h,p as _,F as f,b as v,e as b,g as k,j as g,k as w,q as y,s as S,f as V,t as j,l as z,m as $}from"./index-7ef9e5b0.js";import{_ as T}from"./button.c8a4a8e4.js";import{c as B,n as W,m as I,a as N,f as C,h as U,g as A,_ as G,p as H,P}from"./icon.4e54a3b5.js";import{_ as q}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as D}from"./toast.0dde31fe.js";import{j as E,k as F,g as M,i as O}from"./index.5059ae5b.js";import{g as L,f as R}from"./index.ca928f2d.js";import{u as Z}from"./pinia-auto-refs.64a97d29.js";import"./router.34791702.js";import"./urlMap.3d32d270.js";import"./transition.3e58c70b.js";import"./request.55a7bd8a.js";const J={...B,modelValue:{type:[Boolean,Number,String],default:!1},disabled:W,textPosition:I("right"),iconSize:N(""),label:[Boolean,Number,String],indeterminate:Boolean,shape:I("round"),checkedValue:{type:[Boolean,Number,String],default:!0},uncheckedValue:{type:[Boolean,Number,String],default:!1}},K={[C]:e=>!0,[U]:(e,t)=>!0},Q=Symbol("nut-checkbox"),X=`${P}-checkbox`,Y=s({name:X,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),ee=q(s({...Y,props:J,emits:K,setup(e,{emit:l}){const s=e,g=o(),w=t(i(s,"disabled")),{parent:y}=a(Q),S=n({partialSelect:s.indeterminate});function V(e){return e===s.checkedValue}const j=c((()=>null!=y?y.value.value.includes(s.label):V(s.modelValue))),z=c((()=>null!=y&&null!=y.disabled.value?y.disabled.value:w.value)),$=c((()=>A(s,X,{[`${X}--reverse`]:"left"===s.textPosition}))),T=c((()=>({[`${X}__icon`]:!0,[`${X}__icon--disabled`]:z.value,[`${X}__icon--disable`]:z.value,[`${X}__icon--indeterminate`]:S.partialSelect,[`${X}__icon--unchecked`]:!j.value}))),B=c((()=>({[`${X}__label`]:!0,[`${X}__label--disabled`]:z.value}))),W=c((()=>({[`${X}__button`]:!0,[`${X}__button--active`]:j.value,[`${X}__button--disabled`]:z.value})));let I="";function N(e,t){I="click",l(C,t),l(U,e,t)}function P(){if(!z.value){if(null!=y){const e=y.value.value,t=y.max.value,a=e.indexOf(s.label);a>=0?(e.splice(a,1),N(!1,s.label)):(t<=0||e.length<t)&&(e.push(s.label),N(!0,s.label)),y.updateValue(e)}else j.value&&!S.partialSelect?N(!1,s.uncheckedValue):N(!0,s.checkedValue);S.partialSelect&&(S.partialSelect=!1)}}return u((()=>s.modelValue),(e=>{"click"!==I?null==y&&l(U,V(e),e):I=""})),u((()=>s.indeterminate),(e=>{S.partialSelect=e})),(e,t)=>{const a=k;return r(),d(a,{class:m(x($)),style:b(s.customStyle),onClick:P},{default:p((()=>["button"===s.shape?(r(),d(a,{key:0,class:m(x(W))},{default:p((()=>[h(e.$slots,"default",{},void 0,!0)])),_:3},8,["class"])):(r(),_(f,{key:1},[S.partialSelect?(r(),_(f,{key:0},[x(g).indeterminate?h(e.$slots,"indeterminate",{key:0},void 0,!0):(r(),d(G,{key:1,"custom-class":x(T),name:"check-disabled",size:x(H)(s.iconSize),width:x(H)(s.iconSize),height:x(H)(s.iconSize)},null,8,["custom-class","size","width","height"]))],64)):x(j)?(r(),_(f,{key:2},[x(g).checkedIcon?h(e.$slots,"checkedIcon",{key:0},void 0,!0):(r(),d(G,{key:1,"custom-class":x(T),name:"checked",size:x(H)(s.iconSize),width:x(H)(s.iconSize),height:x(H)(s.iconSize)},null,8,["custom-class","size","width","height"]))],64)):(r(),_(f,{key:1},[x(g).icon?h(e.$slots,"icon",{key:0},void 0,!0):(r(),d(G,{key:1,"custom-class":x(T),name:"check-normal",size:x(H)(s.iconSize),width:x(H)(s.iconSize),height:x(H)(s.iconSize)},null,8,["custom-class","size","width","height"]))],64)),v(a,{class:m(x(B))},{default:p((()=>[h(e.$slots,"default",{},void 0,!0)])),_:3},8,["class"])],64))])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-f4139b93"]]),te=q(s({__name:"signup",setup(t){const{topHeight:a}=L(),{setUserInfo:s,setToken:o}=Z("root"),i=g();g(!1);const c=n({account:"",passWord:"",code:"",countdown:0,checkbox:!0,timer:null,type:!0}),u=g(!1);function d(){var e;""!==c.account&&11===c.account.length?c.countdown>0||E({phoneNumber:c.account}).then((()=>{c.countdown=60,c.timer=setInterval((()=>{c.countdown-=1,c.countdown<=0&&clearInterval(c.timer)}),1e3),uni.showToast({title:"验证码已发送",icon:"success",duration:800})})).catch((e=>{console.log("err====",e)})):null==(e=i.value)||e.showToast.fail("请填写完整的手机号码",{duration:800})}async function m(){var e;c.checkbox?u.value||(u.value=!0,!function(){var e;let t="";""!==c.account&&11===c.account.length||(t+="请填写完整的手机号码");""===c.code&&(t+=""!==t?",验证码不能为空":"验证码不能为空");""===c.passWord&&(t+=""!==t?",密码不能为空":"密码不能为空");/[A-Z]/.test(c.passWord)||(t+=""!==t?",密码缺少大写字母":"密码缺少大写字母");/[a-z]/.test(c.passWord)||(t+=""!==t?",密码缺少小写字母":"密码缺少小写字母");/[0-9]/.test(c.passWord)||(t+=""!==t?",密码缺少数字":"密码缺少数字");return""===t||(null==(e=i.value)||e.showToast.fail(t,{duration:1200}),!1)}()?setTimeout((()=>{var e;null==(e=i.value)||e.hideToast(),u.value=!1}),1e3):F({phoneNumber:c.account,code:c.code,pws:c.passWord}).then((()=>{M({username:c.account,password:c.passWord}).then((e=>{uni.setStorageSync("token",e.token),o(e.token),O().then((e=>{var t;s({...e.user,permissions:e.permissions,roles:e.roles}),null==(t=i.value)||t.showToast.success("注册成功，自动登录。",{duration:800}),setTimeout((()=>{R("index")}),800),u.value=!1})).catch((e=>{console.log("err====",e),u.value=!1}))})).catch((e=>{console.log("err====",e),u.value=!1}))})).catch((e=>{console.log("err====",e)})).finally((()=>{var e;u.value=!1,null==(e=i.value)||e.hideToast()}))):null==(e=i.value)||e.showToast.fail("请同意并勾选协议",{duration:1200})}function h(){uni.navigateTo({url:"/pages/protocol/protocol"})}return w((()=>{uni.hideTabBar({success:()=>{},fail:()=>{}})})),(t,s)=>{const o=e,n=z($("nut-input"),l),k=z($("nut-button"),T),g=z($("nut-checkbox"),ee),w=z($("nut-toast"),D);return r(),_(f,null,[y(" login-main loginBg h-48px flex justify-start items-center text-_wn_fff text-20px pt-15px pt-80px h-100_pes_ px-20px clearable _wn_left i-ri-user-line text-_wn_808080 i-ri-shield-check-line _wn_right i-ri-lock-line text-_wn_009729 text-14px pt-20px pl-20px w-120px mr-0 text-12px pt-40px mt-40px "),S("div",{class:"login-main"},[S("div",{class:"loginBg"},[S("div",{style:b({paddingTop:`${x(a)}px`})},[S("div",{"h-48px":"",flex:"","justify-start":"","items-center":"",class:"h-48px flex justify-start items-center"},[v(o)]),S("div",{text:"#fff 20px","pt-15px":"",class:"text-_wn_fff text-20px pt-15px"},"智能物联房屋管理")],4)]),S("div",{"pt-80px":"",class:"pt-80px"},[S("div",{h:"100%","px-20px":"",class:"h-100_pes_ px-20px"},[v(n,{modelValue:x(c).account,"onUpdate:modelValue":s[0]||(s[0]=e=>x(c).account=e),placeholder:"请输入手机号码","max-length":"11",clearable:"",class:"clearable"},{left:p((()=>[S("div",{"i-ri-user-line":"",text:"#808080",class:"i-ri-user-line text-_wn_808080"})])),_:1},8,["modelValue"]),v(n,{modelValue:x(c).code,"onUpdate:modelValue":s[1]||(s[1]=e=>x(c).code=e),placeholder:"请输入验证码",clearable:"",class:"clearable"},{left:p((()=>[S("div",{"i-ri-shield-check-line":"",text:"#808080",class:"i-ri-shield-check-line text-_wn_808080"})])),right:p((()=>[v(k,{type:"primary",size:"small",onClick:d},{default:p((()=>[V(j(x(c).countdown>0?`${x(c).countdown}秒`:"获取验证码"),1)])),_:1})])),_:1},8,["modelValue"]),v(n,{modelValue:x(c).passWord,"onUpdate:modelValue":s[2]||(s[2]=e=>x(c).passWord=e),placeholder:"请输入密码",type:"password",clearable:"",class:"clearable"},{left:p((()=>[S("div",{"i-ri-lock-line":"",text:"#808080",class:"i-ri-lock-line text-_wn_808080"})])),right:p((()=>[])),_:1},8,["modelValue"])]),S("div",{flex:"","items-center":"",text:"#009729 14px","pt-20px":"","pl-20px":"",class:"flex items-center text-_wn_009729 text-14px pt-20px pl-20px"},[v(g,{modelValue:x(c).checkbox,"onUpdate:modelValue":s[3]||(s[3]=e=>x(c).checkbox=e),label:"复选框","w-120px":"","mr-0":"",class:"w-120px mr-0"},{default:p((()=>[S("div",{text:"12px",class:"text-12px"},"我已阅读并同意")])),_:1},8,["modelValue"]),S("div",{text:"#009729 12px",onClick:h,class:"text-_wn_009729 text-12px"}," 《挚家智能门锁-管理端用户服务协议》 ")]),S("div",{"pt-40px":"","px-20px":"",class:"pt-40px px-20px"},[v(k,{"mt-40px":"",loading:x(u),style:{width:"100%"},type:"primary",onClick:m,class:"mt-40px"},{default:p((()=>[V(" 注册 ")])),_:1},8,["loading"]),v(w,{ref_key:"toastRef",ref:i},null,512)])])])],2112)}}}),[["__scopeId","data-v-16471591"]]);export{te as default};
