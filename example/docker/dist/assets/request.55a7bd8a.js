import{v as e}from"./index-7ef9e5b0.js";import{f as o}from"./router.34791702.js";const a="https",t={dev:{baseUrl:a+"://m.dev.xxx.com/admins",apiBaseUrl:a+"://m.dev.api.xxx.com/admins"},beta:{baseUrl:a+"://m.beta.xxx.com",apiBaseUrl:a+"://m.beta.api.xxx.com"},prod:{baseUrl:a+"://m.xxx.com",apiBaseUrl:a+"://zhijia-admin.vimhe.com/admins"},local:{baseUrl:a+"://m.dev.xxx.com",apiBaseUrl:a+"://m.dev.api.xxx.com"}};const i=(r="dev",Object.assign({apiEnv:r},t[r]));var r;let s=0;function n(e){const{errmsg:a="抢购火爆，稍候片刻！",errno:t=-1}=e;if(1e4===t)o("login");else uni.showToast({title:a,icon:"error"})}function m(o,a,t){return new Promise(((i,r)=>{const m=JSON.parse(JSON.stringify(t.urlName));let d;t.isLoading&&(uni.showLoading({title:"加载中"}),s+=1),delete t.isLoading,delete t.urlName;let l="";l="https://zhijia-admin.vimhe.com/admins"+a,uni.request({url:l,method:o,timeout:2e4,header:{"content-type":"application/json;",Authorization:uni.getStorageSync("token")},data:t,success:o=>{o.statusCode>=200&&o.statusCode<400?200===o.data.code?(d=o.data,function(e,o,a,t){console.log(`%c${e} ${a} (%c200%c)`,"font-weight:bold","color:#67C23A;font-weight:bold","font-weight:bold",JSON.parse(JSON.stringify(t)))}(m,e().format("YYYY-MM-DD HH:mm:ss"),a,d),i(d)):401===o.data.code?(n({errno:o.data.code,errmsg:"令牌失效，请重新登陆"}),uni.redirectTo({url:"/pages/loginOrSignup/loginOrSignup"})):(r(o.data),n({errno:o.data.code,errmsg:o.data.msg})):(r(o.data),n({errno:-1,errmsg:"抢购火爆，稍候片刻！"}))},fail:e=>{console.log("res-fall",e),r(e),n({errno:-1,errmsg:"网络不给力，请检查你的网络设置~"})},complete:()=>{s-=1,0===s&&uni.hideLoading()}})}))}i.apiBaseUrl;const d={get:(e,o)=>m("GET",e,{...o}),post:(e,o)=>m("POST",e,{...o})};export{d as h};
