import{F as S,a as x,v as M,_ as N}from"./inline-px-to-vw-Cb-HqVio.js";import{d as q,G as B,V as U,a2 as D,r as _,a3 as y,f as F,M as G,N as T,k as l,O as m,W as d,Q as e,a0 as p,a1 as f,a4 as z,a5 as g}from"./index-CWnvaZUX.js";import"./index-DCkYsqDO.js";import{B as I}from"./index-ClkBfOaF.js";import{b as V}from"./route-block-B_A1xBdJ.js";import"./use-id-DFe4c6kO.js";import"./toNumber-BA28v8oo.js";import"./index-Bm0YupIy.js";const L={class:"m-x-a text-center w-7xl"},O={class:"rounded-3xl overflow-hidden"},Q={class:"mt-16 rounded-3xl overflow-hidden"},R={class:"mt-16 rounded-3xl overflow-hidden"},W={class:"mt-16 rounded-3xl overflow-hidden"},j={class:"mt-16 rounded-3xl overflow-hidden"},A={class:"mt-16"},H=q({__name:"index",setup(J){const{t:r}=B(),h=U(),w=D(),u=_(!1),s=y({email:"",code:"",nickname:"",password:"",confirmPassword:""}),k=o=>o===s.password,i=y({email:[{required:!0,message:r("register.pleaseEnterEmail")}],code:[{required:!0,message:r("register.pleaseEnterCode")}],nickname:[{required:!0,message:r("register.pleaseEnterNickname")}],password:[{required:!0,message:r("register.pleaseEnterPassword")}],confirmPassword:[{required:!0,message:r("register.pleaseEnterConfirmPassword")},{required:!0,validator:k,message:r("register.passwordsDoNotMatch")}]});async function b(){try{u.value=!0,(await w.register()).code===0&&(g({type:"success",message:r("register.registerSuccess")}),h.push({name:"login"}))}finally{u.value=!1}}const c=_(!1),C=F(()=>c.value?r("register.gettingCode"):r("register.getCode"));async function P(){if(!s.email){g({type:"warning",message:r("register.pleaseEnterEmail")});return}c.value=!0;const o=await w.getCode();o.code===0&&g({type:"success",message:"".concat(r("register.sendCodeSuccess"),": ").concat(o.result)}),c.value=!1}return(o,t)=>{const n=S,v=I,E=x,$=N;return T(),G("div",L,[l(E,{model:e(s),rules:e(i),"validate-trigger":"onSubmit",onSubmit:b},{default:m(()=>[d("div",O,[l(n,{modelValue:e(s).email,"onUpdate:modelValue":t[0]||(t[0]=a=>e(s).email=a),modelModifiers:{trim:!0},rules:e(i).email,name:"email",placeholder:o.$t("register.email")},null,8,["modelValue","rules","placeholder"])]),d("div",Q,[l(n,{modelValue:e(s).code,"onUpdate:modelValue":t[1]||(t[1]=a=>e(s).code=a),modelModifiers:{trim:!0},rules:e(i).code,name:"code",placeholder:o.$t("register.code")},{button:m(()=>[l(v,{size:"small",type:"primary",plain:"",onClick:P},{default:m(()=>[p(f(e(C)),1)]),_:1})]),_:1},8,["modelValue","rules","placeholder"])]),d("div",R,[l(n,{modelValue:e(s).nickname,"onUpdate:modelValue":t[2]||(t[2]=a=>e(s).nickname=a),modelModifiers:{trim:!0},rules:e(i).nickname,name:"nickname",placeholder:o.$t("register.nickname")},null,8,["modelValue","rules","placeholder"])]),d("div",W,[l(n,{modelValue:e(s).password,"onUpdate:modelValue":t[3]||(t[3]=a=>e(s).password=a),modelModifiers:{trim:!0},type:"password",rules:e(i).password,name:"password",placeholder:o.$t("register.password")},null,8,["modelValue","rules","placeholder"])]),d("div",j,[l(n,{modelValue:e(s).confirmPassword,"onUpdate:modelValue":t[4]||(t[4]=a=>e(s).confirmPassword=a),modelModifiers:{trim:!0},type:"password",rules:e(i).confirmPassword,name:"confirmPassword",placeholder:o.$t("register.comfirmPassword")},null,8,["modelValue","rules","placeholder"])]),d("div",A,[l(v,{loading:e(u),type:"primary","native-type":"submit",round:"",block:""},{default:m(()=>[p(f(o.$t("register.confirm")),1)]),_:1},8,["loading"])])]),_:1},8,["model","rules"]),l($,{to:"login",block:"",style:z({"margin-top":e(M)(8)})},{default:m(()=>[p(f(o.$t("register.backToLogin")),1)]),_:1},8,["style"])])}}});typeof V=="function"&&V(H);export{H as default};
