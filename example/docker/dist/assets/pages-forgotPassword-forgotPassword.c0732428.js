import{_ as e}from"./Black.5562f5e4.js";import{_ as t}from"./input.ea4d2faf.js";import{d as s,D as o,j as a,k as l,o as n,p as i,q as c,s as r,e as p,u as d,b as u,w as m,f as x,t as f,F as h,l as _,m as w}from"./index-7ef9e5b0.js";import{_ as g}from"./button.c8a4a8e4.js";import{f as v,t as b}from"./index.5059ae5b.js";import{g as j}from"./index.ca928f2d.js";import{r as y}from"./router.34791702.js";import{_ as W}from"./_plugin-vue_export-helper.1b428a4d.js";import"./icon.4e54a3b5.js";import"./request.55a7bd8a.js";import"./urlMap.3d32d270.js";import"./pinia-auto-refs.64a97d29.js";const k=W(s({__name:"forgotPassword",setup(s){const{topHeight:W}=j(),k=o({account:"",passWord:"",passWord2:"",code:"",countdown:0,checkbox:!0,timer:null,type:!0}),V=a(!1);function T(){console.log("state.account",k.account),""!==k.account&&11===k.account.length?k.countdown>0||(v({phoneNumber:k.account}).then((e=>{uni.showToast({title:"验证码已发送",icon:"success",duration:800})})).catch((e=>{console.log("err====",e)})),k.countdown=60,k.timer=setInterval((()=>{k.countdown-=1,k.countdown<=0&&clearInterval(k.timer)}),1e3)):uni.showToast({title:"请填写完整的手机号码",icon:"none"})}async function $(){V.value||(V.value=!0,!function(){let e="";""!==k.account&&11===k.account.length||(e+="请填写完整的手机号码");""===k.code&&(e+=""!==e?",验证码不能为空":"验证码不能为空");""===k.passWord&&(e+=""!==e?",密码不能为空":"密码不能为空");/[A-Z]/.test(k.passWord)||(e+=""!==e?",密码缺少大写字母":"密码缺少大写字母");/[a-z]/.test(k.passWord)||(e+=""!==e?",密码缺少小写字母":"密码缺少小写字母");/[0-9]/.test(k.passWord)||(e+=""!==e?",密码缺少数字":"密码缺少数字");""===k.passWord2&&(e+=""!==e?",确认密码不能为空":"确认密码不能为空");k.passWord!==k.passWord2&&(e+=""!==e?",两次密码不同,请重新输入":"两次密码不同,请重新输入");return""===e||(console.log(`${""!==e?`${e}`:e}`),uni.showToast({title:`${""!==e?`${e}`:e}`,icon:"none"}),!1)}()?setTimeout((()=>{uni.hideToast(),V.value=!1}),1e3):b({phoneNumber:k.account,code:k.code,pws:k.passWord}).then((()=>{uni.showToast({title:"修改成功",icon:"none"}),y()})).catch((e=>{console.log("err====",e),V.value=!1})))}return l((()=>{uni.hideTabBar({success:()=>{},fail:()=>{}})})),(s,o)=>{const a=e,l=_(w("nut-input"),t),v=_(w("nut-button"),g);return n(),i(h,null,[c(" login-main loginBg h-48px flex justify-start items-center text-_wn_fff text-20px pt-15px px-20px pt-80px h-100_pes_ clearable _wn_left i-ri-user-line text-_wn_808080 i-ri-shield-check-line _wn_right i-ri-lock-line pt-40px mt-40px "),r("div",{class:"login-main"},[r("div",{class:"loginBg"},[r("div",{style:p({paddingTop:`${d(W)}px`})},[r("div",{"h-48px":"",flex:"","justify-start":"","items-center":"",class:"h-48px flex justify-start items-center"},[u(a)]),r("div",{text:"#fff 20px","pt-15px":"",class:"text-_wn_fff text-20px pt-15px"},"智能物联房屋管理")],4)]),r("div",{"px-20px":"","pt-80px":"",class:"px-20px pt-80px"},[r("div",{h:"100%",class:"h-100_pes_"}),u(l,{modelValue:d(k).account,"onUpdate:modelValue":o[0]||(o[0]=e=>d(k).account=e),placeholder:"请输入手机号码","max-length":"11",clearable:"",class:"clearable"},{left:m((()=>[r("div",{"i-ri-user-line":"",text:"#808080",class:"i-ri-user-line text-_wn_808080"})])),_:1},8,["modelValue"]),u(l,{modelValue:d(k).code,"onUpdate:modelValue":o[1]||(o[1]=e=>d(k).code=e),placeholder:"请输入验证码",clearable:"",class:"clearable"},{left:m((()=>[r("div",{"i-ri-shield-check-line":"",text:"#808080",class:"i-ri-shield-check-line text-_wn_808080"})])),right:m((()=>[u(v,{type:"primary",size:"small",onClick:T},{default:m((()=>[x(f(d(k).countdown>0?`${d(k).countdown}秒`:"获取验证码"),1)])),_:1})])),_:1},8,["modelValue"]),u(l,{modelValue:d(k).passWord,"onUpdate:modelValue":o[2]||(o[2]=e=>d(k).passWord=e),placeholder:"设置新密码",type:"password",clearable:"",class:"clearable"},{left:m((()=>[r("div",{"i-ri-lock-line":"",text:"#808080",class:"i-ri-lock-line text-_wn_808080"})])),right:m((()=>[])),_:1},8,["modelValue"]),u(l,{modelValue:d(k).passWord2,"onUpdate:modelValue":o[3]||(o[3]=e=>d(k).passWord2=e),placeholder:"确认新密码",type:"password",clearable:"",class:"clearable"},{left:m((()=>[r("div",{"i-ri-lock-line":"",text:"#808080",class:"i-ri-lock-line text-_wn_808080"})])),right:m((()=>[])),_:1},8,["modelValue"]),r("div",{"pt-40px":"",class:"pt-40px"},[u(v,{"mt-40px":"",loading:d(V),style:{width:"100%"},type:"primary",onClick:$,class:"mt-40px"},{default:m((()=>[x(" 提交修改 ")])),_:1},8,["loading"])])])])],2112)}}}),[["__scopeId","data-v-d321404f"]]);export{k as default};
