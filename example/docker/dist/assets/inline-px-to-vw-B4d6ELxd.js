import{d as ce,t as Q,n as D,c as ue,o as Pe,h as de,k as h,p as z,al as fe,C as ge,am as Fe,an as Le,ao as Ne,ap as Re,aq as $e,e as We,a2 as ze,r as H,g as Oe,f as k,F as Z,ar as De,s as qe,A as W,W as je,j as He,i as M,as as p,a8 as Ke,a as Ue,V as K,$ as Ye,z as O,l as Ge,D as Je,y as ee,a9 as Xe,at as Qe,_ as Ze,R as pe,N as et,O as tt,au as nt}from"./index-DY6W9px6.js";import{C as at,c as rt}from"./index-EQSiXM-3.js";import{u as it}from"./use-id-ByNXd1Hg.js";import{B as ot}from"./index-Or5gGZqK.js";import{a as lt,S as te,t as me,r as st}from"./toNumber-BA28v8oo.js";const[ct,ut]=ue("form"),dt={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:D,labelAlign:String,inputAlign:String,scrollToError:Boolean,scrollToErrorPosition:String,validateFirst:Boolean,submitOnEnter:Q,showErrorMessage:Q,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var ft=ce({name:ct,props:dt,emits:["submit","failed"],setup(e,{emit:n,slots:a}){const{children:s,linkChildren:r}=Pe(fe),u=i=>i?s.filter(c=>i.includes(c.name)):s,F=i=>new Promise((c,f)=>{const y=[];u(i).reduce((j,B)=>j.then(()=>{if(!y.length)return B.validate().then(P=>{P&&y.push(P)})}),Promise.resolve()).then(()=>{y.length?f(y):c()})}),T=i=>new Promise((c,f)=>{const y=u(i);Promise.all(y.map(b=>b.validate())).then(b=>{b=b.filter(Boolean),b.length?f(b):c()})}),v=i=>{const c=s.find(f=>f.name===i);return c?new Promise((f,y)=>{c.validate().then(b=>{b?y(b):f()})}):Promise.reject()},_=i=>typeof i=="string"?v(i):e.validateFirst?F(i):T(i),g=i=>{typeof i=="string"&&(i=[i]),u(i).forEach(f=>{f.resetValidation()})},q=()=>s.reduce((i,c)=>(i[c.name]=c.getValidationStatus(),i),{}),A=(i,c)=>{s.some(f=>f.name===i?(f.$el.scrollIntoView(c),!0):!1)},L=()=>s.reduce((i,c)=>(c.name!==void 0&&(i[c.name]=c.formValue.value),i),{}),N=()=>{const i=L();_().then(()=>n("submit",i)).catch(c=>{n("failed",{values:i,errors:c});const{scrollToError:f,scrollToErrorPosition:y}=e;f&&c[0].name&&A(c[0].name,y?{block:y}:void 0)})},C=i=>{z(i),N()};return r({props:e}),de({submit:N,validate:_,getValues:L,scrollToField:A,resetValidation:g,getValidationStatus:q}),()=>{var i;return h("form",{class:ut(),onSubmit:C},[(i=a.default)==null?void 0:i.call(a)])}}});const zt=ge(ft);function he(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function gt(e,n){if(he(e)){if(n.required)return!1;if(n.validateEmpty===!1)return!0}return!(n.pattern&&!n.pattern.test(String(e)))}function mt(e,n){return new Promise(a=>{const s=n.validator(e,n);if($e(s)){s.then(a);return}a(s)})}function ne(e,n){const{message:a}=n;return Re(a)?a(e,n):a||""}function ht({target:e}){e.composing=!0}function ae({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function bt(e,n){const a=Fe();e.style.height="auto";let s=e.scrollHeight;if(Le(n)){const{maxHeight:r,minHeight:u}=n;r!==void 0&&(s=Math.min(s,r)),u!==void 0&&(s=Math.max(s,u))}s&&(e.style.height="".concat(s,"px"),Ne(a))}function vt(e,n){return e==="number"&&(e="text",n!=null||(n="decimal")),e==="digit"&&(e="tel",n!=null||(n="numeric")),{type:e,inputmode:n}}function V(e){return[...e].length}function U(e,n){return[...e].slice(0,n).join("")}const[yt,S]=ue("field"),St={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:D,max:Number,min:Number,formatter:Function,clearIcon:O("clear"),modelValue:Ge(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:O("focus"),formatTrigger:O("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null},inputmode:String},It=We({},rt,St,{rows:D,type:O("text"),rules:Array,autosize:[Boolean,Object],labelWidth:D,labelClass:Je,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var xt=ce({name:yt,props:It,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:a}){const s=it(),r=ze({status:"unvalidated",focused:!1,validateMessage:""}),u=H(),F=H(),T=H(),{parent:v}=Oe(fe),_=()=>{var t;return String((t=e.modelValue)!=null?t:"")},g=t=>{if(M(e[t]))return e[t];if(v&&M(v.props[t]))return v.props[t]},q=k(()=>{const t=g("readonly");if(e.clearable&&!t){const o=_()!=="",l=e.clearTrigger==="always"||e.clearTrigger==="focus"&&r.focused;return o&&l}return!1}),A=k(()=>T.value&&a.input?T.value():e.modelValue),L=k(()=>{var t;const o=g("required");return o==="auto"?(t=e.rules)==null?void 0:t.some(l=>l.required):o}),N=t=>t.reduce((o,l)=>o.then(()=>{if(r.status==="failed")return;let{value:d}=A;if(l.formatter&&(d=l.formatter(d,l)),!gt(d,l)){r.status="failed",r.validateMessage=ne(d,l);return}if(l.validator)return he(d)&&l.validateEmpty===!1?void 0:mt(d,l).then(m=>{m&&typeof m=="string"?(r.status="failed",r.validateMessage=m):m===!1&&(r.status="failed",r.validateMessage=ne(d,l))})}),Promise.resolve()),C=()=>{r.status="unvalidated",r.validateMessage=""},i=()=>n("endValidate",{status:r.status,message:r.validateMessage}),c=(t=e.rules)=>new Promise(o=>{C(),t?(n("startValidate"),N(t).then(()=>{r.status==="failed"?(o({name:e.name,message:r.validateMessage}),i()):(r.status="passed",o(),i())})):o()}),f=t=>{if(v&&e.rules){const{validateTrigger:o}=v.props,l=p(o).includes(t),d=e.rules.filter(m=>m.trigger?p(m.trigger).includes(t):l);d.length&&c(d)}},y=t=>{var o;const{maxlength:l}=e;if(M(l)&&V(t)>+l){const d=_();if(d&&V(d)===+l)return d;const m=(o=u.value)==null?void 0:o.selectionEnd;if(r.focused&&m){const w=[...t],E=w.length-+l;return w.splice(m-E,E),w.join("")}return U(t,+l)}return t},b=(t,o="onChange")=>{var l,d;const m=t;t=y(t);const w=V(m)-V(t);if(e.type==="number"||e.type==="digit"){const x=e.type==="number";if(t=Ke(t,x,x),o==="onBlur"&&t!==""&&(e.min!==void 0||e.max!==void 0)){const I=Ue(+t,(l=e.min)!=null?l:-1/0,(d=e.max)!=null?d:1/0);+t!==I&&(t=I.toString())}}let E=0;if(e.formatter&&o===e.formatTrigger){const{formatter:x,maxlength:I}=e;if(t=x(t),M(I)&&V(t)>+I&&(t=U(t,+I)),u.value&&r.focused){const{selectionEnd:$}=u.value,X=U(m,$);E=V(x(X))-V(X)}}if(u.value&&u.value.value!==t)if(r.focused){let{selectionStart:x,selectionEnd:I}=u.value;if(u.value.value=t,M(x)&&M(I)){const $=V(t);w?(x-=w,I-=w):E&&(x+=E,I+=E),u.value.setSelectionRange(Math.min(x,$),Math.min(I,$))}}else u.value.value=t;t!==e.modelValue&&n("update:modelValue",t)},j=t=>{t.target.composing||b(t.target.value)},B=()=>{var t;return(t=u.value)==null?void 0:t.blur()},P=()=>{var t;return(t=u.value)==null?void 0:t.focus()},R=()=>{const t=u.value;e.type==="textarea"&&e.autosize&&t&&bt(t,e.autosize)},ve=t=>{r.focused=!0,n("focus",t),W(R),g("readonly")&&B()},ye=t=>{r.focused=!1,b(_(),"onBlur"),n("blur",t),!g("readonly")&&(f("onBlur"),W(R),Xe())},Y=t=>n("clickInput",t),Se=t=>n("clickLeftIcon",t),Ie=t=>n("clickRightIcon",t),xe=t=>{z(t),n("update:modelValue",""),n("clear",t)},G=k(()=>{if(typeof e.error=="boolean")return e.error;if(v&&v.props.showError&&r.status==="failed")return!0}),_e=k(()=>{const t=g("labelWidth"),o=g("labelAlign");if(t&&o!=="top")return{width:Z(t)}}),Ve=t=>{t.keyCode===13&&(!(v&&v.props.submitOnEnter)&&e.type!=="textarea"&&z(t),e.type==="search"&&B()),n("keypress",t)},J=()=>e.id||"".concat(s,"-input"),we=()=>r.status,Ee=()=>{const t=S("control",[g("inputAlign"),{error:G.value,custom:!!a.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(a.input)return h("div",{class:t,onClick:Y},[a.input()]);const o={id:J(),ref:u,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:g("disabled"),readonly:g("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?"".concat(s,"-label"):void 0,"data-allow-mismatch":"attribute",onBlur:ye,onFocus:ve,onInput:j,onClick:Y,onChange:ae,onKeypress:Ve,onCompositionend:ae,onCompositionstart:ht};return e.type==="textarea"?h("textarea",ee(o,{inputmode:e.inputmode}),null):h("input",ee(vt(e.type,e.inputmode),o),null)},Ce=()=>{const t=a["left-icon"];if(e.leftIcon||t)return h("div",{class:S("left-icon"),onClick:Se},[t?t():h(K,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},ke=()=>{const t=a["right-icon"];if(e.rightIcon||t)return h("div",{class:S("right-icon"),onClick:Ie},[t?t():h(K,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},Me=()=>{if(e.showWordLimit&&e.maxlength){const t=V(_());return h("div",{class:S("word-limit")},[h("span",{class:S("word-num")},[t]),Ye("/"),e.maxlength])}},Te=()=>{if(v&&v.props.showErrorMessage===!1)return;const t=e.errorMessage||r.validateMessage;if(t){const o=a["error-message"],l=g("errorMessageAlign");return h("div",{class:S("error-message",l)},[o?o({message:t}):t])}},Ae=()=>{const t=g("labelWidth"),o=g("labelAlign"),l=g("colon")?":":"";if(a.label)return[a.label(),l];if(e.label)return h("label",{id:"".concat(s,"-label"),for:a.input?void 0:J(),"data-allow-mismatch":"attribute",onClick:d=>{z(d),P()},style:o==="top"&&t?{width:Z(t)}:void 0},[e.label+l])},Be=()=>[h("div",{class:S("body")},[Ee(),q.value&&h(K,{ref:F,name:e.clearIcon,class:S("clear")},null),ke(),a.button&&h("div",{class:S("button")},[a.button()])]),Me(),Te()];return de({blur:B,focus:P,validate:c,formValue:A,resetValidation:C,getValidationStatus:we}),De(Qe,{customValue:T,resetValidation:C,validateWithTrigger:f}),qe(()=>e.modelValue,()=>{b(_()),C(),f("onChange"),W(R)}),je(()=>{b(_(),e.formatTrigger),W(R)}),He("touchstart",xe,{target:k(()=>{var t;return(t=F.value)==null?void 0:t.$el})}),()=>{const t=g("disabled"),o=g("labelAlign"),l=Ce(),d=()=>{const m=Ae();return o==="top"?[l,m].filter(Boolean):m||[]};return h(at,{size:e.size,class:S({error:G.value,disabled:t,["label-".concat(o)]:o}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:_e.value,valueClass:S("value"),titleClass:[S("label",[o,{required:L.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:l&&o!=="top"?()=>l:null,title:d,value:Be,extra:a.extra})}}});const Ot=ge(xt);function _t(e,n){for(var a=-1,s=e==null?0:e.length,r=Array(s);++a<s;)r[a]=n(e[a],a,e);return r}var Vt=Array.isArray,re=te?te.prototype:void 0,ie=re?re.toString:void 0;function be(e){if(typeof e=="string")return e;if(Vt(e))return _t(e,be)+"";if(lt(e))return ie?ie.call(e):"";var n=e+"";return n=="0"&&1/e==-1/0?"-0":n}var wt=1/0,Et=17976931348623157e292;function Ct(e){if(!e)return e===0?e:0;if(e=me(e),e===wt||e===-1/0){var n=e<0?-1:1;return n*Et}return e===e?e:0}function kt(e){var n=Ct(e),a=n%1;return n===n?a?n-a:n:0}function oe(e){return e==null?"":be(e)}var Mt=st.isFinite,Tt=Math.min;function At(e){var n=Math[e];return function(a,s){if(a=me(a),s=s==null?0:Tt(kt(s),292),s&&Mt(a)){var r=(oe(a)+"e").split("e"),u=n(r[0]+"e"+(+r[1]+s));return r=(oe(u)+"e").split("e"),+(r[0]+"e"+(+r[1]-s))}return n(a)}}var le=At("round");const Bt={};function Pt(e,n){const a=ot;return et(),pe(a,{size:"small",plain:"",type:"primary"},{default:tt(()=>[nt(e.$slots,"default",{},void 0,!0)]),_:3})}const Dt=Ze(Bt,[["render",Pt],["__scopeId","data-v-bf9d23c4"],["__file","C:/Users/Administrator/Desktop/vue-crx/vue3-vant-mobile/src/components/GhostButton.vue"]]),se=375,Ft=600;function qt(e){if(e===0)return e;const n=le(e*100/se,3),a=le(e*Ft/se,3),s=e>0?"min":"max";return"".concat(s,"(").concat(n,"vw, ").concat(a,"px)")}export{Ot as F,Dt as _,zt as a,qt as v};
