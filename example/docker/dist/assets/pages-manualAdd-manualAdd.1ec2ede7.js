import{_ as o}from"./LayoutDefault.d26a134f.js";import{_ as e}from"./Black.b78a5e9b.js";import{_ as s}from"./input.22b40e50.js";import{j as t,J as l,k as a,o as n,p as r,q as u,b as i,w as c,F as p,s as m,u as d,z as f,f as _,l as h,m as x,g as v}from"./index-1ce5008d.js";import{_ as g}from"./button.bcf26005.js";import{l as j,m as w}from"./index.30070924.js";import{r as F}from"./router.a71bc990.js";import{_ as E}from"./_plugin-vue_export-helper.1b428a4d.js";import"./index.243deaf5.js";import"./urlMap.3d32d270.js";import"./pinia-auto-refs.0a4d1dcc.js";import"./icon.219c12b7.js";import"./request.9efe9454.js";const y=E({__name:"manualAdd",setup(E){const y=t("");function b(o){try{return JSON.parse(o),!0}catch(e){return!1}}function k(){y.value?w({hoseid:Math.random().toString(36).substr(2,8),locktype:1,deviceid:y.value}).then((o=>{uni.showToast({title:"绑定成功",icon:"success",mask:!0}),uni.$emit("addDoorLockSuccess"),F(3)})).catch((o=>{console.log("err====",o)})):uni.showToast({title:"请输入门锁ID",icon:"none",mask:!0})}return l((o=>{if(console.log("query.result",b(o.result)),""!==o.result)if(console.log("222222",222222),b(o.result)){console.log("query.result",o.result);const e=JSON.parse(o.result).deviceid;e?(console.log("deviceid",e),uni.showToast({title:"识别成功，请绑定门锁",icon:"none"})):uni.showToast({title:"识别错误，请将相机靠近锁上二维码重试或手动绑定门锁。",icon:"none"}),y.value=e,console.log("result.value",y.value)}else uni.showToast({title:"识别错误，请将相机靠近锁上二维码重试或手动绑定门锁。",icon:"none"})})),a((()=>{j().then((o=>{})).catch((o=>{console.log("err====",o)}))})),(t,l)=>{const a=e,j=h(x("nut-input"),s),w=h(x("nut-button"),g),F=v,E=o;return n(),r(p,null,[u(" _wn_left color-_wn_262727 bg-_wn_EFEFEF h-100vh h-10px px-20px mt-40px "),i(E,{title:"绑定门锁",full:!0,background:"#fefefe"},{left:c((()=>[i(a,{color:"#262727",class:"color-_wn_262727"})])),default:c((()=>[m("div",{bg:"#EFEFEF",h:"100vh",class:"bg-_wn_EFEFEF h-100vh"},[m("div",{"h-10px":"",class:"h-10px"}),i(j,{modelValue:d(y),"onUpdate:modelValue":l[0]||(l[0]=o=>f(y)?y.value=o:null),placeholder:"请输入"},{left:c((()=>[_(" 门锁ID： ")])),_:1},8,["modelValue"]),i(F,{"px-20px":"","mt-40px":"",class:"px-20px mt-40px"},{default:c((()=>[i(w,{style:{width:"100%"},type:"primary",onClick:k},{default:c((()=>[_(" 绑定门锁 ")])),_:1})])),_:1})])])),_:1})],2112)}}},[["__scopeId","data-v-f59ed256"]]);export{y as default};
