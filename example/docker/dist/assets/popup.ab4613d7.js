import{d as o,c as s,$ as e,o as n,a as l,w as t,r as i,u as a,D as r,A as c,k as d,T as p,p as u,q as y,b as v,n as m,F as f,g as b}from"./index-1ce5008d.js";import{c as k,a as C,m as I,t as O,U as h,d as x,q as _,g as $,l as S,P as w,L as z,O as A,j as g,e as B,_ as V}from"./icon.219c12b7.js";import{N as j}from"./transition.2d1cecda.js";import{_ as N}from"./_plugin-vue_export-helper.1b428a4d.js";const L={center:"fade",top:"slide-down",bottom:"slide-up",left:"slide-left",right:"slide-right"};let P=2e3;let D=0;const T="nut-overflow-hidden";const q={...k,visible:Boolean,zIndex:Number,duration:C(300),overlayClass:I(""),overlayStyle:Object,lockScroll:Boolean,closeOnClickOverlay:O,destroyOnClose:Boolean},E={[h]:o=>x(o),[_]:o=>o instanceof Object},G=`${w}-overlay`,H=o({name:G,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),F=N(o({...H,props:q,emits:E,setup(o,{emit:r}){const c=o,d=s((()=>$(c,G,{[c.overlayClass]:!0}))),p=s((()=>"number"==typeof c.duration?c.duration:Number(c.duration))),u=s((()=>S(c,{transitionDuration:`${p.value}ms`,zIndex:c.zIndex,...c.overlayStyle})));function y(o){r(_,o),c.closeOnClickOverlay&&r(h,!1)}const[v,m]=(f=()=>c.lockScroll,[()=>{if(f())try{!D&&document.body.classList.add(T),D++}catch(o){console.error(o)}},()=>{if(f()&&D)try{D--,!D&&document.body.classList.remove(T)}catch(o){console.error(o)}}]);var f;return e((()=>{c.visible?v():m()})),(o,s)=>(n(),l(j,{"custom-class":a(d),"custom-style":a(u),show:c.visible,name:"fade",duration:a(p),"destroy-on-close":c.destroyOnClose,onClick:y},{default:t((()=>[i(o.$slots,"default",{},void 0,!0)])),_:3},8,["custom-class","custom-style","show","duration","destroy-on-close"]))}}),[["__scopeId","data-v-6d536f3f"]]),U={...q,...k,position:I("center"),transition:{type:String,default:""},popClass:I(""),round:Boolean,closeable:Boolean,closeIcon:I("close"),closeIconPosition:I("top-right"),destroyOnClose:O,overlay:O,safeAreaInsetBottom:Boolean,safeAreaInsetTop:O},J={[h]:o=>!0,"click-pop":o=>!0,"click-close-icon":()=>!0,"click-overlay":()=>!0,[z]:()=>!0,[A]:()=>!0,[g]:()=>!0,[B]:()=>!0,opend:()=>!0},K=`${w}-popup`;function M(o,e){const n=r({innerVisible:!1,innerIndex:o.zIndex,showSlot:!0}),l=s((()=>$(o,K,{round:o.round,[`nut-popup--${o.position}`]:!0,[`nut-popup--${o.position}--safebottom`]:"bottom"===o.position&&o.safeAreaInsetBottom,[`nut-popup--${o.position}--safetop`]:"top"===o.position&&o.safeAreaInsetTop,[o.popClass]:!0}))),t=s((()=>S(o,{zIndex:n.innerIndex,transitionDuration:`${o.duration}ms`}))),i=s((()=>o.transition?o.transition:`${L[o.position]}`)),a=()=>{n.innerVisible||(n.innerIndex=void 0!==o.zIndex?o.zIndex:++P,n.innerVisible=!0,e(h,!0),n.showSlot=!0,e(z))},u=()=>{n.innerVisible&&(n.innerVisible=!1,e(h,!1),e(g))},y=o=>{o&&!n.innerVisible&&a(),!o&&n.innerVisible&&(n.innerVisible=!1,e(g))};return c((()=>o.visible),(o=>{y(o)})),d((()=>{y(o.visible)})),{...p(n),popStyle:t,transitionName:i,classes:l,onClick:o=>{e("click-pop",o)},onClickCloseIcon:o=>{o.stopPropagation(),e("click-close-icon"),u()},onClickOverlay:()=>{e("click-overlay"),o.closeOnClickOverlay&&u()},onOpened:()=>{e(A),e("opend")},onClosed:()=>{e(B),n.showSlot=!o.destroyOnClose}}}const Q=o({name:`${w}-popup`,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),R=N(o({...Q,props:U,emits:J,setup(o,{emit:e}){const r=o,{classes:c,popStyle:d,innerIndex:p,showSlot:k,transitionName:C,onClick:I,onClickCloseIcon:O,onClickOverlay:h,onOpened:x,onClosed:_}=M(r,e),$=s((()=>Number(r.duration)));return(o,s)=>{const e=b;return n(),u(f,null,[r.overlay?(n(),l(F,{key:0,"overlay-class":r.overlayClass,"overlay-style":r.overlayStyle,visible:r.visible,"z-index":a(p),duration:a($),"lock-scroll":r.lockScroll,"close-on-click-overlay":r.closeOnClickOverlay,"destroy-on-close":r.destroyOnClose,onClick:a(h)},null,8,["overlay-class","overlay-style","visible","z-index","duration","lock-scroll","close-on-click-overlay","destroy-on-close","onClick"])):y("v-if",!0),v(j,{"custom-class":a(c),"custom-style":a(d),name:a(C),show:r.visible,duration:a($),"destroy-on-close":r.destroyOnClose,onAfterEnter:a(x),onAfterLeave:a(_),onClick:a(I)},{default:t((()=>[a(k)?i(o.$slots,"default",{key:0},void 0,!0):y("v-if",!0),r.closeable?(n(),l(e,{key:1,class:m(["nut-popup__close-icon",`nut-popup__close-icon--${r.closeIconPosition}`]),onClick:a(O)},{default:t((()=>[i(o.$slots,"closeIcon",{},(()=>[v(V,{name:"close",height:"12px"})]),!0)])),_:3},8,["class","onClick"])):y("v-if",!0)])),_:3},8,["custom-class","custom-style","name","show","duration","destroy-on-close","onAfterEnter","onAfterLeave","onClick"])],64)}}}),[["__scopeId","data-v-912d90bb"]]);export{R as N,U as p};
