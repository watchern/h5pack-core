import{c as M,e as P,i as _e,a as te,d as H,m as B,b as L,n as R,r as y,u as Se,f as p,g as fe,h as ge,w as Ve,j as he,k as d,p as be,H as oe,t as ke,l as U,o as Pe,q as Ee,s as G,v as le,x as ae,y as Ie,z as De,B as Me,A as q,C as pe,D as J,E as He,F as $e,G as Be,I as Ne,J as Re,K as Q,L as ie,M as se,N as W,O as N,P as X,Q as V,R as ce,S as Ue,T as Ae,U as Le}from"./index-CPuNDxMO.js";import{C as Fe}from"./index-BmqK2zk-.js";import{C as Ke}from"./index-C_9ZN0mQ.js";import{L as Ce}from"./index-Iud34tg3.js";import{b as ue}from"./route-block-B_A1xBdJ.js";const[ze,T,re]=M("picker"),Oe=e=>e.find(o=>!o.disabled)||e[0];function Ye(e,o){const n=e[0];if(n){if(Array.isArray(n))return"multiple";if(o.children in n)return"cascade"}return"default"}function A(e,o){o=te(o,0,e.length);for(let n=o;n<e.length;n++)if(!e[n].disabled)return n;for(let n=o-1;n>=0;n--)if(!e[n].disabled)return n;return 0}const de=(e,o,n)=>o!==void 0&&e.some(u=>u[n.value]===o);function ne(e,o,n){const u=e.findIndex(f=>f[n.value]===o),a=A(e,u);return e[a]}function je(e,o,n){const u=[];let a={[o.children]:e},f=0;for(;a&&a[o.children];){const m=a[o.children],b=n.value[f];if(a=_e(b)?ne(m,b,o):void 0,!a&&m.length){const s=Oe(m)[o.value];a=ne(m,s,o)}f++,u.push(m)}return u}function Ge(e){const{transform:o}=window.getComputedStyle(e),n=o.slice(7,o.length-1).split(", ")[5];return Number(n)}function qe(e){return P({text:"text",value:"value",children:"children"},e)}const me=200,ve=300,Je=15,[Te,Z]=M("picker-column"),we=Symbol(Te);var Qe=H({name:Te,props:{value:R,fields:B(Object),options:L(),readonly:Boolean,allowHtml:Boolean,optionHeight:B(Number),swipeDuration:B(R),visibleOptionNum:B(R)},emits:["change","clickOption","scrollInto"],setup(e,{emit:o,slots:n}){let u,a,f,m,b;const s=y(),c=y(),g=y(0),v=y(0),k=Se(),C=()=>e.options.length,x=()=>e.optionHeight*(+e.visibleOptionNum-1)/2,h=r=>{let t=A(e.options,r);const l=-t*e.optionHeight,i=()=>{t>C()-1&&(t=A(e.options,r));const w=e.options[t][e.fields.value];w!==e.value&&o("change",w)};u&&l!==g.value?b=i:i(),g.value=l},O=()=>e.readonly||!e.options.length,K=r=>{u||O()||(b=null,v.value=me,h(r),o("clickOption",e.options[r]))},_=r=>te(Math.round(-r/e.optionHeight),0,C()-1),$=p(()=>_(g.value)),z=(r,t)=>{const l=Math.abs(r/t);r=g.value+l/.003*(r<0?-1:1);const i=_(r);v.value=+e.swipeDuration,h(i)},E=()=>{u=!1,v.value=0,b&&(b(),b=null)},Y=r=>{if(!O()){if(k.start(r),u){const t=Ge(c.value);g.value=Math.min(0,t-x())}v.value=0,a=g.value,f=Date.now(),m=a,b=null}},j=r=>{if(O())return;k.move(r),k.isVertical()&&(u=!0,be(r,!0));const t=te(a+k.deltaY.value,-(C()*e.optionHeight),e.optionHeight),l=_(t);l!==$.value&&o("scrollInto",e.options[l]),g.value=t;const i=Date.now();i-f>ve&&(f=i,m=t)},I=()=>{if(O())return;const r=g.value-m,t=Date.now()-f;if(t<ve&&Math.abs(r)>Je){z(r,t);return}const i=_(g.value);v.value=me,h(i),setTimeout(()=>{u=!1},0)},S=()=>{const r={height:"".concat(e.optionHeight,"px")};return e.options.map((t,l)=>{const i=t[e.fields.text],{disabled:w}=t,D=t[e.fields.value],ye={role:"button",style:r,tabindex:w?-1:0,class:[Z("item",{disabled:w,selected:D===e.value}),t.className],onClick:()=>K(l)},xe={class:"van-ellipsis",[e.allowHtml?"innerHTML":"textContent"]:i};return d("li",ye,[n.option?n.option(t,l):d("div",xe,null)])})};return fe(we),ge({stopMomentum:E}),Ve(()=>{const r=u?Math.floor(-g.value/e.optionHeight):e.options.findIndex(i=>i[e.fields.value]===e.value),t=A(e.options,r),l=-t*e.optionHeight;u&&t<r&&E(),g.value=l}),he("touchmove",j,{target:s}),()=>d("div",{ref:s,class:Z(),onTouchstartPassive:Y,onTouchend:I,onTouchcancel:I},[d("ul",{ref:c,style:{transform:"translate3d(0, ".concat(g.value+x(),"px, 0)"),transitionDuration:"".concat(v.value,"ms"),transitionProperty:v.value?"all":"none"},class:Z("wrapper"),onTransitionend:E},[S()])])}});const[We]=M("picker-toolbar"),F={title:String,cancelButtonText:String,confirmButtonText:String},Xe=["cancel","confirm","title","toolbar"],Ze=Object.keys(F);var et=H({name:We,props:F,emits:["confirm","cancel"],setup(e,{emit:o,slots:n}){const u=()=>{if(n.title)return n.title();if(e.title)return d("div",{class:[T("title"),"van-ellipsis"]},[e.title])},a=()=>o("cancel"),f=()=>o("confirm"),m=()=>{var s;const c=(s=e.cancelButtonText)!=null?s:re("cancel");if(!(!n.cancel&&!c))return d("button",{type:"button",class:[T("cancel"),oe],onClick:a},[n.cancel?n.cancel():c])},b=()=>{var s;const c=(s=e.confirmButtonText)!=null?s:re("confirm");if(!(!n.confirm&&!c))return d("button",{type:"button",class:[T("confirm"),oe],onClick:f},[n.confirm?n.confirm():c])};return()=>d("div",{class:T("toolbar")},[n.toolbar?n.toolbar():[m(),u(),b()]])}});const[tt,bt]=M("picker-group"),nt=Symbol(tt);P({tabs:L(),activeTab:U(0),nextStepText:String,showToolbar:ke},F);const ot=P({loading:Boolean,readonly:Boolean,allowHtml:Boolean,optionHeight:U(44),showToolbar:ke,swipeDuration:U(1e3),visibleOptionNum:U(6)},F),lt=P({},ot,{columns:L(),modelValue:L(),toolbarPosition:De("top"),columnsFieldNames:Object});var at=H({name:ze,props:lt,emits:["confirm","cancel","change","scrollInto","clickOption","update:modelValue"],setup(e,{emit:o,slots:n}){const u=y(),a=y(e.modelValue.slice(0)),{parent:f}=fe(nt),{children:m,linkChildren:b}=Pe(we);b();const s=p(()=>qe(e.columnsFieldNames)),c=p(()=>Ee(e.optionHeight)),g=p(()=>Ye(e.columns,s.value)),v=p(()=>{const{columns:t}=e;switch(g.value){case"multiple":return t;case"cascade":return je(t,s.value,a);default:return[t]}}),k=p(()=>v.value.some(t=>t.length)),C=p(()=>v.value.map((t,l)=>ne(t,a.value[l],s.value))),x=p(()=>v.value.map((t,l)=>t.findIndex(i=>i[s.value.value]===a.value[l]))),h=(t,l)=>{if(a.value[t]!==l){const i=a.value.slice(0);i[t]=l,a.value=i}},O=()=>({selectedValues:a.value.slice(0),selectedOptions:C.value,selectedIndexes:x.value}),K=(t,l)=>{h(l,t),g.value==="cascade"&&a.value.forEach((i,w)=>{const D=v.value[w];de(D,i,s.value)||h(w,D.length?D[0][s.value.value]:void 0)}),le(()=>{o("change",P({columnIndex:l},O()))})},_=(t,l)=>{const i={columnIndex:l,currentOption:t};o("clickOption",P(O(),i)),o("scrollInto",i)},$=()=>{m.forEach(l=>l.stopMomentum());const t=O();return le(()=>{const l=O();o("confirm",l)}),t},z=()=>o("cancel",O()),E=()=>v.value.map((t,l)=>d(Qe,{value:a.value[l],fields:s.value,options:t,readonly:e.readonly,allowHtml:e.allowHtml,optionHeight:c.value,swipeDuration:e.swipeDuration,visibleOptionNum:e.visibleOptionNum,onChange:i=>K(i,l),onClickOption:i=>_(i,l),onScrollInto:i=>{o("scrollInto",{currentOption:i,columnIndex:l})}},{option:n.option})),Y=t=>{if(k.value){const l={height:"".concat(c.value,"px")},i={backgroundSize:"100% ".concat((t-c.value)/2,"px")};return[d("div",{class:T("mask"),style:i},null),d("div",{class:[Me,T("frame")],style:l},null)]}},j=()=>{const t=c.value*+e.visibleOptionNum,l={height:"".concat(t,"px")};return!e.loading&&!k.value&&n.empty?n.empty():d("div",{ref:u,class:T("columns"),style:l},[E(),Y(t)])},I=()=>{if(e.showToolbar&&!f)return d(et,Ie(ae(e,Ze),{onConfirm:$,onCancel:z}),ae(n,Xe))};G(v,t=>{t.forEach((l,i)=>{l.length&&!de(l,a.value[i],s.value)&&h(i,Oe(l)[s.value.value])})},{immediate:!0});let S;return G(()=>e.modelValue,t=>{!q(t,a.value)&&!q(t,S)&&(a.value=t.slice(0),S=t.slice(0))},{deep:!0}),G(a,t=>{q(t,e.modelValue)||(S=t.slice(0),o("update:modelValue",S))},{immediate:!0}),he("touchmove",be,{target:u}),ge({confirm:$,getSelectedOptions:()=>C.value}),()=>{var t,l;return d("div",{class:T()},[e.toolbarPosition==="top"?I():null,e.loading?d(Ce,{class:T("loading")},null):null,(t=n["columns-top"])==null?void 0:t.call(n),j(),(l=n["columns-bottom"])==null?void 0:l.call(n),e.toolbarPosition==="bottom"?I():null])}}});const it=pe(at),[st,ee]=M("switch"),ct={size:R,loading:Boolean,disabled:Boolean,modelValue:J,activeColor:String,inactiveColor:String,activeValue:{type:J,default:!0},inactiveValue:{type:J,default:!1}};var ut=H({name:st,props:ct,emits:["change","update:modelValue"],setup(e,{emit:o,slots:n}){const u=()=>e.modelValue===e.activeValue,a=()=>{if(!e.disabled&&!e.loading){const m=u()?e.inactiveValue:e.activeValue;o("update:modelValue",m),o("change",m)}},f=()=>{if(e.loading){const m=u()?e.activeColor:e.inactiveColor;return d(Ce,{class:ee("loading"),color:m},null)}if(n.node)return n.node()};return He(()=>e.modelValue),()=>{var m;const{size:b,loading:s,disabled:c,activeColor:g,inactiveColor:v}=e,k=u(),C={fontSize:$e(b),backgroundColor:k?g:v};return d("div",{role:"switch",class:ee({on:k,loading:s,disabled:c}),style:C,tabindex:c?void 0:0,"aria-checked":k,onClick:a},[d("div",{class:ee("node")},[f()]),(m=n.background)==null?void 0:m.call(n)])}}});const rt=pe(ut),dt=H({__name:"index",setup(e){const{t:o}=Be(),n=p({get:()=>Ne.value,set:()=>Re()}),u=p(()=>[{title:o("menus.mockGuide"),route:"mock"},{title:o("menus.echartsDemo"),route:"charts"},{title:o("menus.unocssExample"),route:"unocss"},{title:o("menus.persistPiniaState"),route:"counter"},{title:o("menus.keepAlive"),route:"keepalive"},{title:o("menus.scrollCache"),route:"scroll-cache"},{title:o("menus.404Demo"),route:"unknown"}]),a=y(!1),f=y([Q.value]),m=p(()=>ie.find(s=>s.value===Q.value).text);function b(s){Q.value=s.selectedOptions[0].value,a.value=!1}return(s,c)=>{const g=rt,v=Ke,k=Fe,C=it,x=Le;return W(),se(ce,null,[d(k,{title:s.$t("menus.basicSettings"),border:!1,inset:!0},{default:N(()=>[d(v,{center:"",title:s.$t("menus.darkMode")},{"right-icon":N(()=>[d(g,{modelValue:V(n),"onUpdate:modelValue":c[0]||(c[0]=h=>X(n)?n.value=h:null),size:"20px","aria-label":"on/off Dark Mode"},null,8,["modelValue"])]),_:1},8,["title"]),d(v,{"is-link":"",title:s.$t("menus.language"),value:V(m),onClick:c[1]||(c[1]=h=>a.value=!0)},null,8,["title","value"])]),_:1},8,["title"]),d(k,{title:s.$t("menus.exampleComponents"),border:!1,inset:!0},{default:N(()=>[(W(!0),se(ce,null,Ue(V(u),h=>(W(),Ae(v,{key:h.route,title:h.title,to:h.route,"is-link":""},null,8,["title","to"]))),128))]),_:1},8,["title"]),d(x,{show:V(a),"onUpdate:show":c[4]||(c[4]=h=>X(a)?a.value=h:null),position:"bottom"},{default:N(()=>[d(C,{modelValue:V(f),"onUpdate:modelValue":c[2]||(c[2]=h=>X(f)?f.value=h:null),columns:V(ie),onConfirm:b,onCancel:c[3]||(c[3]=h=>a.value=!1)},null,8,["modelValue","columns"])]),_:1},8,["show"])],64)}}});typeof ue=="function"&&ue(dt);export{dt as default};
