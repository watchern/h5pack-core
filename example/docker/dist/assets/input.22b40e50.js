import{O as e,K as a,c as t,j as o,Q as l,d as n,E as s,G as i,A as r,k as c,o as u,a as d,w as p,r as f,q as m,b as y,n as g,e as h,u as b,f as v,t as _,Y as w,g as k,_ as C,h as S,R as j}from"./index-1ce5008d.js";import{c as x,w as B,m as O,a as E,n as I,t as $,b as A,q as T,E as z,F as q,G as F,x as L,f as P,r as V,H,I as G,g as K,_ as M,P as W,J}from"./icon.219c12b7.js";import{_ as N}from"./_plugin-vue_export-helper.1b428a4d.js";function Q(n){const s=e(n,null);if(s){const e=l(),{add:o,remove:n,internalChildren:i}=s;o(e),a((()=>n(e)));return{parent:s,index:t((()=>i.indexOf(e)))}}return{parent:null,index:o(-1)}}const R=Symbol("Form"),Y={...x,modelValue:B({}),rules:B({}),disabled:Boolean,labelPosition:O("left"),starPosition:O("left")},D={validate:e=>e instanceof Object};function U(e){const{parent:a}=Q(R);return t((()=>null!=e.value?e.value:null!=(null==a?void 0:a.props.disabled)&&a.props.disabled))}const X={...x,type:O("text"),modelValue:E(""),inputClass:{type:[String,Object,Array],default:""},inputStyle:{type:[String,Object,Array],default:""},placeholder:O(""),placeholderStyle:O(""),placeholderClass:O("input-placeholder"),inputAlign:O("left"),required:Boolean,disabled:I,readonly:Boolean,error:Boolean,maxLength:E(140),clearable:Boolean,clearSize:E("14"),border:$,formatTrigger:O("onChange"),formatter:{type:Function,default:null},showWordLimit:Boolean,autofocus:Boolean,confirmType:O("done"),adjustPosition:$,alwaysSystem:Boolean,showClearIcon:Boolean,inputMode:O("text"),cursorSpacing:A(0),alwaysEmbed:Boolean,confirmHold:Boolean,cursor:A(-1),selectionStart:A(-1),selectionEnd:A(-1),holdKeyboard:Boolean,password:Boolean},Z={[T]:e=>e instanceof Object,clickInput:e=>e instanceof Object,[z]:e=>e instanceof Object,[q]:e=>e instanceof Object,[F]:()=>!0,[L]:e=>e instanceof Object,[P]:(e,a)=>(V(e)||H(e))&&(a instanceof Object||void 0===a),[G]:(e,a)=>(V(e)||H(e))&&a instanceof Object};function ee(e,a,t){const o=e.indexOf(a);return-1===o?e:"-"===a&&0!==o?e.slice(0,o):e.slice(0,o+1)+e.slice(o).replace(t,"")}function ae(e,a=!0,t=!0){e=a?ee(e,".",/\./g):e.split(".")[0];const o=a?/[^-0-9.]/g:/[^-0-9]/g;return(e=t?ee(e,"-",/-/g):e.replace(/-/,"")).replace(o,"")}const te=`${W}-input`,oe=n({name:te,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),le=N(n({...oe,props:X,emits:Z,setup(e,{emit:a}){const l=e,n=s();function x(e){return Boolean(n[e])}const B=U(i(l,"disabled"));function O(){return null==l.modelValue?"":String(l.modelValue)}const E=t((()=>O())),I=t((()=>K(l,te,{[`${te}--disabled`]:B.value,[`${te}--required`]:l.required,[`${te}--error`]:l.error,[`${te}--border`]:l.border}))),$=t((()=>[l.inputStyle,{textAlign:l.inputAlign}])),A=t((()=>null==l.maxLength?-1:Number(l.maxLength)));function V(e,t="onChange"){A.value>0&&e.length>A.value&&(e=e.slice(0,A.value)),"number"===l.type&&(e=ae(e,!1,!1)),"digit"===l.type&&(e=ae(e,!0,!0)),l.formatter&&t===l.formatTrigger&&(e=l.formatter(e)),a(P,e)}function H(e){V(e.detail.value),j((()=>{a(G,E.value,e)}))}function W(e){if(J){e.target.composing||H(e)}else H(e)}function N(e){a(T,e)}function Q(e){B.value||a("clickInput",e)}const R=o(!1),Y=o(!1);function D(e){B.value||l.readonly||(a(q,e),R.value=!0)}function X(e){B.value||l.readonly||(a(z,e),setTimeout((()=>{R.value=!1}),200),Y.value?Y.value=!1:V(e.detail.value,"onBlur"))}function Z(e){a(L,e)}function ee(e){B.value||(a(P,"",e),a(F),Y.value=!0)}function oe(e){if(J){e.target.composing=!0}}function le(e){if(J){const a=e.target;a.composing&&(a.composing=!1,a.dispatchEvent(new Event("input")))}}return r((()=>l.modelValue),(e=>{e!==E.value&&V(O())})),c((()=>{V(O(),l.formatTrigger)})),(e,a)=>{const t=k,o=C,n=S;return u(),d(t,{class:g(b(I)),style:h(l.customStyle),onClick:N},{default:p((()=>[x("left")?(u(),d(t,{key:0,class:"nut-input__left"},{default:p((()=>[f(e.$slots,"left",{},void 0,!0)])),_:3})):m("v-if",!0),y(t,{class:"nut-input__value"},{default:p((()=>[y(o,{class:g(["nut-input__input",l.inputClass]),style:h(b($)),value:b(E),type:l.type,placeholder:l.placeholder,"placeholder-style":l.placeholderStyle,"placeholder-class":l.placeholderClass,disabled:b(B),readonly:l.readonly,focus:l.autofocus,maxlength:b(A),"format-trigger":l.formatTrigger,"auto-blur":!!l.autofocus||void 0,"confirm-type":l.confirmType,"adjust-position":l.adjustPosition,"always-system":l.alwaysSystem,inputmode:l.inputMode,"cursor-spacing":l.cursorSpacing,"always-embed":l.alwaysEmbed,"confirm-hold":l.confirmHold,cursor:l.cursor,"selection-start":l.selectionStart,"selection-end":l.selectionEnd,"hold-keyboard":l.holdKeyboard,password:l.password,onInput:W,onFocus:D,onBlur:X,onClick:Q,onChange:le,onCompositionstart:oe,onCompositionend:le,onConfirm:Z},null,8,["class","style","value","type","placeholder","placeholder-style","placeholder-class","disabled","readonly","focus","maxlength","format-trigger","auto-blur","confirm-type","adjust-position","always-system","inputmode","cursor-spacing","always-embed","confirm-hold","cursor","selection-start","selection-end","hold-keyboard","password"]),l.readonly?(u(),d(t,{key:0,class:"nut-input__mask",onClick:Q})):m("v-if",!0),l.showWordLimit&&b(A)>0?(u(),d(t,{key:1,class:"nut-input__word-limit"},{default:p((()=>[y(n,{class:"nut-input__word-num"},{default:p((()=>[v(_(b(E).length),1)])),_:1}),v("/"+_(b(A)),1)])),_:1})):m("v-if",!0)])),_:1}),l.clearable&&!l.readonly?(u(),d(t,{key:1,class:g(["nut-input__clear",{"nut-hidden":!((R.value||l.showClearIcon)&&b(E).length>0)}]),onClick:w(ee,["stop"])},{default:p((()=>[x("clear")?f(e.$slots,"clear",{key:0},void 0,!0):(u(),d(M,{key:1,name:"mask-close","custom-class":"nut-input__clear-icon",size:l.clearSize,width:l.clearSize,height:l.clearSize},null,8,["size","width","height"]))])),_:3},8,["class","onClick"])):m("v-if",!0),x("right")?(u(),d(t,{key:2,class:"nut-input__right"},{default:p((()=>[f(e.$slots,"right",{},void 0,!0)])),_:3})):m("v-if",!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-3405542c"]]);export{R as F,le as _,Q as a,D as b,Y as f,U as u};
