import{_ as t}from"./LayoutTabbar.066d80d8.js";import{_ as e,a as o}from"./cellgroup.337209aa.js";import{j as n,A as l,k as s,c as a,d as i,o as c,a as r,w as u,b as k,n as p,u as f,e as d,r as v,p as y,F as _,f as x,t as C,q as g,z as m,g as O,B as b,s as h,l as w,m as A}from"./index-1ce5008d.js";import{i as T,c as B,t as j,m as S,d as D,U as P,C as $,O as F,e as z,g as I,P as U}from"./icon.219c12b7.js";import{u as L}from"./useTranslate.c0fa51af.js";import{_ as M}from"./button.bcf26005.js";import{p as q,N as E}from"./popup.ab4613d7.js";import{_ as G}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as H}from"./toast.a93d2c92.js";import{c as N}from"./index.30070924.js";import{u as J}from"./pinia-auto-refs.0a4d1dcc.js";import"./TabBar.f3d286e6.js";import"./index.243deaf5.js";import"./urlMap.3d32d270.js";import"./transition.2d1cecda.js";import"./request.9efe9454.js";import"./router.a71bc990.js";const K={...q,...B,closeOnClickOverlay:j,title:S(""),content:S(""),noFooter:Boolean,noOkBtn:Boolean,noCancelBtn:Boolean,cancelText:S(""),okText:S(""),okAutoClose:j,cancelAutoClose:j,textAlign:S("center"),closeOnPopstate:Boolean,footerDirection:S("horizontal"),customClass:S(""),popStyle:{type:Object},beforeClose:Function},R={update:t=>D(t),[P]:t=>D(t),ok:()=>!0,[$]:()=>!0,[F]:()=>!0,[z]:()=>!0},Q=`${U}-dialog`;function V(t,e){const o=n(t.visible),i=n({title:t.title,content:t.content,cancelText:t.cancelText,okText:t.okText,textAlign:t.textAlign,footerDirection:t.footerDirection,noFooter:t.noFooter,noOkBtn:t.noOkBtn,noCancelBtn:t.noCancelBtn,transition:t.transition,closeOnClickOverlay:t.closeOnClickOverlay,okAutoClose:t.okAutoClose});l((()=>t.title),(t=>i.value.title=t));s((()=>{t.closeOnPopstate&&window.addEventListener("popstate",(()=>{r("page")}))})),l((()=>t.visible),(t=>{o.value=t,t&&e(F)}));const c=a((()=>I(t,Q)));function r(n){!function(t,{args:e=[],done:o,canceled:n}){if(t){const l=t(null,...e);T(l)?l.then((t=>{t?o(t):n&&n()})).catch((()=>{})):l?o():n&&n()}else o()}(t.beforeClose,{args:[n],done:()=>{var t;o.value=!1,e("update",t=!1),e(P,t),e(z)}})}return{contentStyle:a((()=>({textAlign:i.value.textAlign}))),showPopup:o,onClickOverlay:function(){t.closeOnClickOverlay&&r("")},onCancel:function(){e($),t.cancelAutoClose&&(o.value=!1,r($))},onOk:function(){e("ok"),t.okAutoClose&&r("ok")},closed:r,classes:c,showDialog:e=>{i.value={title:e.title||t.title,content:e.content||t.content,cancelText:e.cancelText||t.cancelText,okText:e.okText||t.okText,okAutoClose:e.okAutoClose||t.okAutoClose,textAlign:e.textAlign||t.textAlign,footerDirection:e.footerDirection||t.footerDirection,noFooter:e.noFooter||t.noFooter,noOkBtn:e.noOkBtn||t.noOkBtn,transition:e.transition||t.transition,noCancelBtn:e.noCancelBtn||t.noCancelBtn,closeOnClickOverlay:e.closeOnClickOverlay||t.closeOnClickOverlay},o.value=!0},dialogStatus:i}}const W=`${U}-dialog`,X=i({name:W,inheritAttrs:!1,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{translate:Y}=L(W),Z=G(i({...X,props:K,emits:R,setup(t,{expose:e,emit:o}){const n=t,{contentStyle:l,showPopup:s,onClickOverlay:a,onCancel:i,onOk:h,classes:w,closed:A,dialogStatus:T,showDialog:B}=V(n,o);return e({showDialog:B,onOk:h,onCancel:i}),(t,e)=>{const o=O,B=b;return c(),r(E,{visible:f(s),"onUpdate:visible":e[0]||(e[0]=t=>m(s)?s.value=t:null),"close-on-click-overlay":!1,"lock-scroll":t.lockScroll,"pop-class":t.popClass,"overlay-class":t.overlayClass,"overlay-style":t.overlayStyle,"custom-style":t.popStyle,"z-index":t.zIndex,round:"",transition:t.transition,onClickOverlay:f(a),onClickCloseIcon:f(A)},{default:u((()=>[k(o,{class:p(f(w)),style:d(t.customStyle)},{default:u((()=>[t.$slots.header||f(T).title?(c(),r(o,{key:0,class:"nut-dialog__header"},{default:u((()=>[t.$slots.header?v(t.$slots,"header",{key:0},void 0,!0):(c(),y(_,{key:1},[x(C(f(T).title||n.title),1)],64))])),_:3})):g("v-if",!0),k(o,{class:"nut-dialog__content",style:d(f(l))},{default:u((()=>[t.$slots.default?v(t.$slots,"default",{key:0},void 0,!0):"string"==typeof t.content?(c(),r(B,{key:1,nodes:f(T).content||n.content},null,8,["nodes"])):g("v-if",!0),g(' <component :is="content" v-else /> ')])),_:3},8,["style"]),f(T).noFooter?g("v-if",!0):(c(),r(o,{key:1,class:p(["nut-dialog__footer",{[t.footerDirection]:f(T).footerDirection}])},{default:u((()=>[t.$slots.footer?v(t.$slots,"footer",{key:0},void 0,!0):(c(),y(_,{key:1},[f(T).noCancelBtn?g("v-if",!0):(c(),r(M,{key:0,size:"small",plain:"",type:"primary","custom-class":"nut-dialog__footer-cancel",onClick:f(i)},{default:u((()=>[x(C(f(T).cancelText||n.cancelText||f(Y)("cancel")),1)])),_:1},8,["onClick"])),f(T).noOkBtn?g("v-if",!0):(c(),r(M,{key:1,size:"small",type:"primary","custom-class":"nut-dialog__footer-ok",onClick:f(h)},{default:u((()=>[x(C(f(T).okText||n.okText||f(Y)("confirm")),1)])),_:1},8,["onClick"]))],64))])),_:3},8,["class"]))])),_:3},8,["class","style"])])),_:3},8,["visible","lock-scroll","pop-class","overlay-class","overlay-style","custom-style","z-index","transition","onClickOverlay","onClickCloseIcon"])}}}),[["__scopeId","data-v-d6e116db"]]),tt=G(i({__name:"profile",setup(l){const a=n(!1),i=n({token:""});i.value.token=uni.getStorageSync("token");const{setCurrent:p}=J("tabbar");function d(t){uni.navigateTo({url:`/pages/profilePages/${t}`})}function v(){console.log("取消"),a.value=!1}function O(){console.log("确定"),N().then((t=>{T()})).catch((t=>{console.log("err====",t)}))}const b=n();function T(){p(0),uni.clearStorage(),i.value.token="",uni.navigateTo({url:"/pages/loginOrSignup/loginOrSignup"})}return s((()=>{uni.$on("doorLockName",(function(){console.log("222222",222222)}))})),(n,l)=>{const s=w(A("nut-cell"),e),p=w(A("nut-cell-group"),o),B=w(A("nut-dialog"),Z),j=w(A("nut-button"),M),S=w(A("nut-toast"),H),D=t;return c(),y(_,null,[g(" bg-_wn_efefef h-1px is-link _wn_title text-_wn_333 pt-40px px-20px "),k(D,{title:"我的",full:!0},{default:u((()=>[h("div",{bg:"#efefef","h-1px":"",class:"bg-_wn_efefef h-1px"}),k(p,null,{default:u((()=>[f(i).token?(c(),r(s,{key:0,"is-link":"",onClick:l[0]||(l[0]=t=>d("changePassword")),class:"is-link"},{title:u((()=>[h("div",{text:"#333",class:"text-_wn_333"},"修改密码")])),_:1})):g("v-if",!0),k(s,{"is-link":"",onClick:l[1]||(l[1]=t=>d("privacyPolicy")),class:"is-link"},{title:u((()=>[h("div",{text:"#333",class:"text-_wn_333"},"隐私政策")])),_:1}),k(s,{"is-link":"",onClick:l[2]||(l[2]=t=>d("aboutUs")),class:"is-link"},{title:u((()=>[h("div",{text:"#333",class:"text-_wn_333"},"关于我们")])),_:1}),k(s,{"is-link":"",onClick:l[3]||(l[3]=t=>{var e;null==(e=window.APP)||e.invokeClientMethod("getUser",{name:"王者荣耀",age:29},(t=>{i.value.age=t.age}))}),class:"is-link"},{title:u((()=>[h("div",{text:"#333",class:"text-_wn_333"},"关于我们")])),_:1}),k(s,{"is-link":"",onClick:l[4]||(l[4]=t=>{var e;null==(e=b.value)||e.showToast.fail("仅APP支持此操作",{duration:800})}),class:"is-link"},{title:u((()=>[h("div",{text:"#333",class:"text-_wn_333"},"增加一条推送")])),_:1}),f(i).token?(c(),r(s,{key:1},{title:u((()=>[h("div",{text:"#333",onClick:l[5]||(l[5]=t=>a.value=!0),class:"text-_wn_333"},"注销账户")])),_:1})):g("v-if",!0)])),_:1}),f(a)?(c(),r(B,{key:0,visible:f(a),"onUpdate:visible":l[6]||(l[6]=t=>m(a)?a.value=t:null),title:"提示",content:"账号注销后权限和所有记录将全部删除，无法恢复，请谨慎操作。",onCancel:v,onOk:O},null,8,["visible"])):g("v-if",!0),h("div",{"pt-40px":"","px-20px":"",class:"pt-40px px-20px"},[f(i).token?(c(),r(j,{key:0,style:{width:"100%"},type:"primary",onClick:T},{default:u((()=>[x(" 退出登录-"+C(f(i).token)+"- ",1)])),_:1})):g("v-if",!0),f(i).token?g("v-if",!0):(c(),r(j,{key:1,style:{width:"100%"},type:"primary",onClick:T},{default:u((()=>[x(" 登录-"+C(f(i).token)+"- ",1)])),_:1}))]),k(S,{ref_key:"toastRef",ref:b},null,512)])),_:1})],2112)}}}),[["__scopeId","data-v-d7af205e"]]);export{tt as default};
