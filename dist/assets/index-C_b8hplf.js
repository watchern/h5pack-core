import{v as x,F as C,a as P,_ as S}from"./inline-px-to-vw-CrALOm_x.js";import{d as E,G as U,T as M,a1 as N,r as y,a2 as h,f as q,a3 as g,_ as B,M as T,N as F,k as a,O as m,U as n,$ as _,a0 as w,a4 as G}from"./index-Cm9E2GDo.js";import"./index-D8O4A3t3.js";import{b as V}from"./route-block-B_A1xBdJ.js";import{B as z}from"./index-CX0LkVW1.js";import"./use-id-BQTAkVon.js";import"./toNumber-BA28v8oo.js";import"./index-CTulDoT8.js";const k=E({__name:"index",setup(l,{expose:s}){s();const{t:r}=U(),e=M(),u=N(),c=y(!1),t=h({email:"",code:"",nickname:"",password:"",confirmPassword:""}),i=d=>d===t.password,p=h({email:[{required:!0,message:r("register.pleaseEnterEmail")}],code:[{required:!0,message:r("register.pleaseEnterCode")}],nickname:[{required:!0,message:r("register.pleaseEnterNickname")}],password:[{required:!0,message:r("register.pleaseEnterPassword")}],confirmPassword:[{required:!0,message:r("register.pleaseEnterConfirmPassword")},{required:!0,validator:i,message:r("register.passwordsDoNotMatch")}]});async function f(){try{c.value=!0,(await u.register()).code===0&&(g({type:"success",message:r("register.registerSuccess")}),e.push({name:"login"}))}finally{c.value=!1}}const o=y(!1),b=q(()=>o.value?r("register.gettingCode"):r("register.getCode"));async function D(){if(!t.email){g({type:"warning",message:r("register.pleaseEnterEmail")});return}o.value=!0;const d=await u.getCode();d.code===0&&g({type:"success",message:"".concat(r("register.sendCodeSuccess"),": ").concat(d.result)}),o.value=!1}const v={t:r,router:e,userStore:u,loading:c,postData:t,validatorPassword:i,rules:p,register:f,isGettingCode:o,buttonText:b,getCode:D,get vw(){return x}};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),O={class:"m-x-a text-center w-7xl"},j={class:"rounded-3xl overflow-hidden"},A={class:"mt-16 rounded-3xl overflow-hidden"},I={class:"mt-16 rounded-3xl overflow-hidden"},L={class:"mt-16 rounded-3xl overflow-hidden"},R={class:"mt-16 rounded-3xl overflow-hidden"},H={class:"mt-16"};function J(l,s,r,e,u,c){const t=C,i=z,p=P,f=S;return F(),T("div",O,[a(p,{model:e.postData,rules:e.rules,"validate-trigger":"onSubmit",onSubmit:e.register},{default:m(()=>[n("div",j,[a(t,{modelValue:e.postData.email,"onUpdate:modelValue":s[0]||(s[0]=o=>e.postData.email=o),modelModifiers:{trim:!0},rules:e.rules.email,name:"email",placeholder:l.$t("register.email")},null,8,["modelValue","rules","placeholder"])]),n("div",A,[a(t,{modelValue:e.postData.code,"onUpdate:modelValue":s[1]||(s[1]=o=>e.postData.code=o),modelModifiers:{trim:!0},rules:e.rules.code,name:"code",placeholder:l.$t("register.code")},{button:m(()=>[a(i,{size:"small",type:"primary",plain:"",onClick:e.getCode},{default:m(()=>[_(w(e.buttonText),1)]),_:1})]),_:1},8,["modelValue","rules","placeholder"])]),n("div",I,[a(t,{modelValue:e.postData.nickname,"onUpdate:modelValue":s[2]||(s[2]=o=>e.postData.nickname=o),modelModifiers:{trim:!0},rules:e.rules.nickname,name:"nickname",placeholder:l.$t("register.nickname")},null,8,["modelValue","rules","placeholder"])]),n("div",L,[a(t,{modelValue:e.postData.password,"onUpdate:modelValue":s[3]||(s[3]=o=>e.postData.password=o),modelModifiers:{trim:!0},type:"password",rules:e.rules.password,name:"password",placeholder:l.$t("register.password")},null,8,["modelValue","rules","placeholder"])]),n("div",R,[a(t,{modelValue:e.postData.confirmPassword,"onUpdate:modelValue":s[4]||(s[4]=o=>e.postData.confirmPassword=o),modelModifiers:{trim:!0},type:"password",rules:e.rules.confirmPassword,name:"confirmPassword",placeholder:l.$t("register.comfirmPassword")},null,8,["modelValue","rules","placeholder"])]),n("div",H,[a(i,{loading:e.loading,type:"primary","native-type":"submit",round:"",block:""},{default:m(()=>[_(w(l.$t("register.confirm")),1)]),_:1},8,["loading"])])]),_:1},8,["model","rules"]),a(f,{to:"login",block:"",style:G({"margin-top":e.vw(8)})},{default:m(()=>[_(w(l.$t("register.backToLogin")),1)]),_:1},8,["style"])])}typeof V=="function"&&V(k);const oe=B(k,[["render",J],["__file","C:/Users/Administrator/Desktop/vue-crx/vue3-vant-mobile/src/pages/register/index.vue"]]);export{oe as default};
