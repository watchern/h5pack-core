import{c as I,e as P,i as ye,a as Z,d as D,m as B,b as U,n as L,r as w,u as xe,f as k,g as me,h as ve,w as Pe,j as fe,k as m,p as ge,H as te,t as he,l as $,o as Se,q as Ve,s as j,v as G,x as ne,y as Ee,z as Ie,B as De,A as oe,C as be,D as q,E as Me,F as He,G as Be,I as Ne,J as Le,K as J,L as ae,_ as $e,M as le,N as Q,O as N,P as ie,Q as Ae,R as Ue,S as Re}from"./index-Cm9E2GDo.js";import{C as Fe}from"./index-BXpmkWsB.js";import{C as Ke}from"./index-D8O4A3t3.js";import{b as se}from"./route-block-B_A1xBdJ.js";import{L as ke}from"./index-CTulDoT8.js";const[ze,p,ce]=I("picker"),Ce=e=>e.find(o=>!o.disabled)||e[0];function Ye(e,o){const n=e[0];if(n){if(Array.isArray(n))return"multiple";if(o.children in n)return"cascade"}return"default"}function A(e,o){o=Z(o,0,e.length);for(let n=o;n<e.length;n++)if(!e[n].disabled)return n;for(let n=o-1;n>=0;n--)if(!e[n].disabled)return n;return 0}const ue=(e,o,n)=>o!==void 0&&e.some(l=>l[n.value]===o);function ee(e,o,n){const l=e.findIndex(h=>h[n.value]===o),s=A(e,l);return e[s]}function je(e,o,n){const l=[];let s={[o.children]:e},h=0;for(;s&&s[o.children];){const d=s[o.children],f=n.value[h];if(s=ye(f)?ee(d,f,o):void 0,!s&&d.length){const u=Ce(d)[o.value];s=ee(d,u,o)}h++,l.push(d)}return l}function Ge(e){const{transform:o}=window.getComputedStyle(e),n=o.slice(7,o.length-1).split(", ")[5];return Number(n)}function qe(e){return P({text:"text",value:"value",children:"children"},e)}const re=200,de=300,Je=15,[pe,W]=I("picker-column"),_e=Symbol(pe);var Qe=D({name:pe,props:{value:L,fields:B(Object),options:U(),readonly:Boolean,allowHtml:Boolean,optionHeight:B(Number),swipeDuration:B(L),visibleOptionNum:B(L)},emits:["change","clickOption","scrollInto"],setup(e,{emit:o,slots:n}){let l,s,h,d,f;const u=w(),g=w(),v=w(0),c=w(0),b=xe(),_=()=>e.options.length,M=()=>e.optionHeight*(+e.visibleOptionNum-1)/2,T=r=>{let t=A(e.options,r);const a=-t*e.optionHeight,i=()=>{t>_()-1&&(t=A(e.options,r));const O=e.options[t][e.fields.value];O!==e.value&&o("change",O)};l&&a!==v.value?f=i:i(),v.value=a},C=()=>e.readonly||!e.options.length,F=r=>{l||C()||(f=null,c.value=re,T(r),o("clickOption",e.options[r]))},y=r=>Z(Math.round(-r/e.optionHeight),0,_()-1),H=k(()=>y(v.value)),K=(r,t)=>{const a=Math.abs(r/t);r=v.value+a/.003*(r<0?-1:1);const i=y(r);c.value=+e.swipeDuration,T(i)},S=()=>{l=!1,c.value=0,f&&(f(),f=null)},z=r=>{if(!C()){if(b.start(r),l){const t=Ge(g.value);v.value=Math.min(0,t-M())}c.value=0,s=v.value,h=Date.now(),d=s,f=null}},Y=r=>{if(C())return;b.move(r),b.isVertical()&&(l=!0,ge(r,!0));const t=Z(s+b.deltaY.value,-(_()*e.optionHeight),e.optionHeight),a=y(t);a!==H.value&&o("scrollInto",e.options[a]),v.value=t;const i=Date.now();i-h>de&&(h=i,d=t)},V=()=>{if(C())return;const r=v.value-d,t=Date.now()-h;if(t<de&&Math.abs(r)>Je){K(r,t);return}const i=y(v.value);c.value=re,T(i),setTimeout(()=>{l=!1},0)},x=()=>{const r={height:"".concat(e.optionHeight,"px")};return e.options.map((t,a)=>{const i=t[e.fields.text],{disabled:O}=t,E=t[e.fields.value],we={role:"button",style:r,tabindex:O?-1:0,class:[W("item",{disabled:O,selected:E===e.value}),t.className],onClick:()=>F(a)},Te={class:"van-ellipsis",[e.allowHtml?"innerHTML":"textContent"]:i};return m("li",we,[n.option?n.option(t,a):m("div",Te,null)])})};return me(_e),ve({stopMomentum:S}),Pe(()=>{const r=l?Math.floor(-v.value/e.optionHeight):e.options.findIndex(i=>i[e.fields.value]===e.value),t=A(e.options,r),a=-t*e.optionHeight;l&&t<r&&S(),v.value=a}),fe("touchmove",Y,{target:u}),()=>m("div",{ref:u,class:W(),onTouchstartPassive:z,onTouchend:V,onTouchcancel:V},[m("ul",{ref:g,style:{transform:"translate3d(0, ".concat(v.value+M(),"px, 0)"),transitionDuration:"".concat(c.value,"ms"),transitionProperty:c.value?"all":"none"},class:W("wrapper"),onTransitionend:S},[x()])])}});const[We]=I("picker-toolbar"),R={title:String,cancelButtonText:String,confirmButtonText:String},Xe=["cancel","confirm","title","toolbar"],Ze=Object.keys(R);var et=D({name:We,props:R,emits:["confirm","cancel"],setup(e,{emit:o,slots:n}){const l=()=>{if(n.title)return n.title();if(e.title)return m("div",{class:[p("title"),"van-ellipsis"]},[e.title])},s=()=>o("cancel"),h=()=>o("confirm"),d=()=>{var u;const g=(u=e.cancelButtonText)!=null?u:ce("cancel");if(!(!n.cancel&&!g))return m("button",{type:"button",class:[p("cancel"),te],onClick:s},[n.cancel?n.cancel():g])},f=()=>{var u;const g=(u=e.confirmButtonText)!=null?u:ce("confirm");if(!(!n.confirm&&!g))return m("button",{type:"button",class:[p("confirm"),te],onClick:h},[n.confirm?n.confirm():g])};return()=>m("div",{class:p("toolbar")},[n.toolbar?n.toolbar():[d(),l(),f()]])}});const[tt,bt]=I("picker-group"),nt=Symbol(tt);P({tabs:U(),activeTab:$(0),nextStepText:String,showToolbar:he},R);const ot=P({loading:Boolean,readonly:Boolean,allowHtml:Boolean,optionHeight:$(44),showToolbar:he,swipeDuration:$(1e3),visibleOptionNum:$(6)},R),at=P({},ot,{columns:U(),modelValue:U(),toolbarPosition:Ie("top"),columnsFieldNames:Object});var lt=D({name:ze,props:at,emits:["confirm","cancel","change","scrollInto","clickOption","update:modelValue"],setup(e,{emit:o,slots:n}){const l=w(),s=w(e.modelValue.slice(0)),{parent:h}=me(nt),{children:d,linkChildren:f}=Se(_e);f();const u=k(()=>qe(e.columnsFieldNames)),g=k(()=>Ve(e.optionHeight)),v=k(()=>Ye(e.columns,u.value)),c=k(()=>{const{columns:t}=e;switch(v.value){case"multiple":return t;case"cascade":return je(t,u.value,s);default:return[t]}}),b=k(()=>c.value.some(t=>t.length)),_=k(()=>c.value.map((t,a)=>ee(t,s.value[a],u.value))),M=k(()=>c.value.map((t,a)=>t.findIndex(i=>i[u.value.value]===s.value[a]))),T=(t,a)=>{if(s.value[t]!==a){const i=s.value.slice(0);i[t]=a,s.value=i}},C=()=>({selectedValues:s.value.slice(0),selectedOptions:_.value,selectedIndexes:M.value}),F=(t,a)=>{T(a,t),v.value==="cascade"&&s.value.forEach((i,O)=>{const E=c.value[O];ue(E,i,u.value)||T(O,E.length?E[0][u.value.value]:void 0)}),oe(()=>{o("change",P({columnIndex:a},C()))})},y=(t,a)=>{const i={columnIndex:a,currentOption:t};o("clickOption",P(C(),i)),o("scrollInto",i)},H=()=>{d.forEach(a=>a.stopMomentum());const t=C();return oe(()=>{const a=C();o("confirm",a)}),t},K=()=>o("cancel",C()),S=()=>c.value.map((t,a)=>m(Qe,{value:s.value[a],fields:u.value,options:t,readonly:e.readonly,allowHtml:e.allowHtml,optionHeight:g.value,swipeDuration:e.swipeDuration,visibleOptionNum:e.visibleOptionNum,onChange:i=>F(i,a),onClickOption:i=>y(i,a),onScrollInto:i=>{o("scrollInto",{currentOption:i,columnIndex:a})}},{option:n.option})),z=t=>{if(b.value){const a={height:"".concat(g.value,"px")},i={backgroundSize:"100% ".concat((t-g.value)/2,"px")};return[m("div",{class:p("mask"),style:i},null),m("div",{class:[De,p("frame")],style:a},null)]}},Y=()=>{const t=g.value*+e.visibleOptionNum,a={height:"".concat(t,"px")};return!e.loading&&!b.value&&n.empty?n.empty():m("div",{ref:l,class:p("columns"),style:a},[S(),z(t)])},V=()=>{if(e.showToolbar&&!h)return m(et,Ee(ne(e,Ze),{onConfirm:H,onCancel:K}),ne(n,Xe))};j(c,t=>{t.forEach((a,i)=>{a.length&&!ue(a,s.value[i],u.value)&&T(i,Ce(a)[u.value.value])})},{immediate:!0});let x;return j(()=>e.modelValue,t=>{!G(t,s.value)&&!G(t,x)&&(s.value=t.slice(0),x=t.slice(0))},{deep:!0}),j(s,t=>{G(t,e.modelValue)||(x=t.slice(0),o("update:modelValue",x))},{immediate:!0}),fe("touchmove",ge,{target:l}),ve({confirm:H,getSelectedOptions:()=>_.value}),()=>{var t,a;return m("div",{class:p()},[e.toolbarPosition==="top"?V():null,e.loading?m(ke,{class:p("loading")},null):null,(t=n["columns-top"])==null?void 0:t.call(n),Y(),(a=n["columns-bottom"])==null?void 0:a.call(n),e.toolbarPosition==="bottom"?V():null])}}});const it=be(lt),[st,X]=I("switch"),ct={size:L,loading:Boolean,disabled:Boolean,modelValue:q,activeColor:String,inactiveColor:String,activeValue:{type:q,default:!0},inactiveValue:{type:q,default:!1}};var ut=D({name:st,props:ct,emits:["change","update:modelValue"],setup(e,{emit:o,slots:n}){const l=()=>e.modelValue===e.activeValue,s=()=>{if(!e.disabled&&!e.loading){const d=l()?e.inactiveValue:e.activeValue;o("update:modelValue",d),o("change",d)}},h=()=>{if(e.loading){const d=l()?e.activeColor:e.inactiveColor;return m(ke,{class:X("loading"),color:d},null)}if(n.node)return n.node()};return Me(()=>e.modelValue),()=>{var d;const{size:f,loading:u,disabled:g,activeColor:v,inactiveColor:c}=e,b=l(),_={fontSize:He(f),backgroundColor:b?v:c};return m("div",{role:"switch",class:X({on:b,loading:u,disabled:g}),style:_,tabindex:g?void 0:0,"aria-checked":b,onClick:s},[m("div",{class:X("node")},[h()]),(d=n.background)==null?void 0:d.call(n)])}}});const rt=be(ut),Oe=D({__name:"index",setup(e,{expose:o}){o();const{t:n}=Be(),l=k({get:()=>Ne.value,set:()=>Le()}),s=k(()=>[{title:n("menus.mockGuide"),route:"mock"},{title:n("menus.echartsDemo"),route:"charts"},{title:n("menus.unocssExample"),route:"unocss"},{title:n("menus.persistPiniaState"),route:"counter"},{title:n("menus.keepAlive"),route:"keepalive"},{title:n("menus.scrollCache"),route:"scroll-cache"},{title:n("menus.404Demo"),route:"unknown"}]),h=w(!1),d=w([J.value]),f=k(()=>ae.find(v=>v.value===J.value).text);function u(v){J.value=v.selectedOptions[0].value,h.value=!1}const g={t:n,checked:l,menuItems:s,showLanguagePicker:h,languageValues:d,language:f,onLanguageConfirm:u,get languageColumns(){return ae}};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}});function dt(e,o,n,l,s,h){const d=rt,f=Ke,u=Fe,g=it,v=Re;return Q(),le(ie,null,[m(u,{title:e.$t("menus.basicSettings"),border:!1,inset:!0},{default:N(()=>[m(f,{center:"",title:e.$t("menus.darkMode")},{"right-icon":N(()=>[m(d,{modelValue:l.checked,"onUpdate:modelValue":o[0]||(o[0]=c=>l.checked=c),size:"20px","aria-label":"on/off Dark Mode"},null,8,["modelValue"])]),_:1},8,["title"]),m(f,{"is-link":"",title:e.$t("menus.language"),value:l.language,onClick:o[1]||(o[1]=c=>l.showLanguagePicker=!0)},null,8,["title","value"])]),_:1},8,["title"]),m(u,{title:e.$t("menus.exampleComponents"),border:!1,inset:!0},{default:N(()=>[(Q(!0),le(ie,null,Ae(l.menuItems,c=>(Q(),Ue(f,{key:c.route,title:c.title,to:c.route,"is-link":""},null,8,["title","to"]))),128))]),_:1},8,["title"]),m(v,{show:l.showLanguagePicker,"onUpdate:show":o[4]||(o[4]=c=>l.showLanguagePicker=c),position:"bottom"},{default:N(()=>[m(g,{modelValue:l.languageValues,"onUpdate:modelValue":o[2]||(o[2]=c=>l.languageValues=c),columns:l.languageColumns,onConfirm:l.onLanguageConfirm,onCancel:o[3]||(o[3]=c=>l.showLanguagePicker=!1)},null,8,["modelValue","columns"])]),_:1},8,["show"])],64)}typeof se=="function"&&se(Oe);const kt=$e(Oe,[["render",dt],["__file","C:/Users/Administrator/Desktop/vue-crx/vue3-vant-mobile/src/pages/index.vue"]]);export{kt as default};
